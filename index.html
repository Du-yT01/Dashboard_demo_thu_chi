<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√°o C√°o Qu·∫£n Tr·ªã Ng√¢n S√°ch & Thu - Chi</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap&subset=vietnamese" rel="stylesheet">
    <style>
        :root {
            --primary: #C81E1E;
            --primary-dark: #9F1C1C;
            --primary-light: #FDE8E8;
            --secondary: #F43F5E;
            --bg-dark: #0F172A;
            --bg-light: #F5F7FB;
            --surface: #FFFFFF;
            --surface-2: #F8FAFC;
            --text-primary: #0F172A;
            --text-secondary: #64748B;
            --border: #E2E8F0;
            --border-soft: #EEF2F6;
            --success: #16A34A;
            --warning: #F59E0B;
            --info: #2563EB;
            --danger: #DC2626;
            --danger-soft: #FEE2E2;
            --shadow-sm: 0 1px 2px rgba(15, 23, 42, 0.08);
            --shadow-md: 0 10px 22px rgba(15, 23, 42, 0.12);
            --shadow-lg: 0 20px 40px rgba(15, 23, 42, 0.16);
            --radius-md: 12px;
            --radius-lg: 16px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Be Vietnam Pro', 'Segoe UI', Tahoma, Arial, sans-serif;
            background: var(--bg-light);
            color: var(--text-primary);
            line-height: 1.5;
            letter-spacing: 0.1px;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background:
                radial-gradient(1200px 600px at 85% -10%, rgba(200, 30, 30, 0.14), transparent 60%),
                radial-gradient(900px 500px at -10% 10%, rgba(37, 99, 235, 0.1), transparent 55%),
                linear-gradient(180deg, #F8FAFC 0%, #F5F7FB 100%);
            z-index: 0;
            pointer-events: none;
        }

        .app-wrapper {
            display: flex;
            min-height: 100vh;
            background: var(--bg-light);
            position: relative;
            z-index: 1;
        }

        .sidebar {
            background: linear-gradient(180deg, var(--bg-dark) 0%, #111827 100%);
            color: white;
            padding: 24px 16px;
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 260px;
            overflow-y: auto;
            border-right: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 4px 0 18px rgba(15, 23, 42, 0.2);
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 28px;
            padding: 12px;
            border-radius: 14px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.12);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            box-shadow: 0 6px 16px rgba(200, 30, 30, 0.35);
        }

        .logo-text {
            font-weight: 700;
            line-height: 1.2;
            font-size: 13px;
            letter-spacing: 0.4px;
        }

        .nav-item {
            padding: 11px 14px;
            margin-bottom: 4px;
            cursor: pointer;
            border-radius: 10px;
            transition: transform 0.2s ease, background 0.2s ease, color 0.2s ease;
            font-size: 13px;
            font-weight: 500;
            color: #9CA3AF;
            display: flex;
            align-items: center;
            gap: 10px;
            border: 1px solid transparent;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.08);
            color: white;
            transform: translateX(2px);
        }

        .nav-item span {
            display: inline-flex;
            width: 20px;
            justify-content: center;
            font-size: 16px;
        }

        .nav-item.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            box-shadow: 0 8px 18px rgba(200, 30, 30, 0.35);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .main-content {
            flex: 1;
            margin-left: 260px;
            padding: 32px 44px 48px;
            width: calc(100% - 260px);
            overflow-x: hidden;
        }

        .page { display: none; animation: fadeInUp 0.45s ease; }
        .page.active { display: block; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(6px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page-header {
            margin-bottom: 24px;
            padding: 18px 20px;
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            background: var(--surface);
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        .page-header::after {
            content: "";
            position: absolute;
            left: 20px;
            bottom: 0;
            width: 72px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 999px;
        }

        .page-title { font-size: 28px; font-weight: 700; margin-bottom: 8px; letter-spacing: -0.2px; }
        .page-subtitle { color: var(--text-secondary); font-size: 14px; max-width: 720px; }

        .section-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-primary);
            margin: 22px 0 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: "";
            width: 16px;
            height: 6px;
            border-radius: 999px;
            background: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .kpi-grid.page1-kpis { grid-template-columns: repeat(3, 1fr); }
        .kpi-grid.page2-quad { grid-template-columns: repeat(2, 1fr); }
        .kpi-grid.page2-approval {
            grid-template-columns: repeat(2, minmax(0, 1fr));
            grid-auto-rows: 1fr;
            gap: 12px;
            height: 100%;
            align-content: stretch;
        }
        .kpi-grid.page3-kpis { grid-template-columns: repeat(4, 1fr); }
        .kpi-grid.page4-kpis { grid-template-columns: repeat(4, 1fr); }

        .kpi-card {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: 16px 18px;
            border: 1px solid var(--border);
            border-left: 4px solid var(--primary);
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .kpi-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .kpi-card.kpi-thu { border-left-color: var(--success); }
        .kpi-card.kpi-thu .kpi-label { color: var(--success); }

        .kpi-label {
            font-size: 11px;
            color: var(--text-secondary);
            font-weight: 600;
            margin-bottom: 6px;
            letter-spacing: 0.2px;
        }

        .kpi-value { font-size: 24px; font-weight: 700; color: var(--text-primary); letter-spacing: -0.2px; }
        .kpi-change {
            font-size: 11px;
            margin-top: 8px;
            padding: 4px 10px;
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            border: 1px solid transparent;
            letter-spacing: 0.3px;
        }
        .kpi-change.positive { background: rgba(22, 163, 74, 0.12); color: var(--success); font-weight: 600; border-color: rgba(22, 163, 74, 0.2); }
        .kpi-change.negative { background: rgba(220, 38, 38, 0.12); color: var(--danger); font-weight: 600; border-color: rgba(220, 38, 38, 0.2); }
        .kpi-sub { font-size: 11px; color: var(--text-secondary); margin-top: 6px; }
        .kpi-delta.positive { color: var(--success); font-weight: 600; }
        .kpi-delta.negative { color: var(--danger); font-weight: 600; }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 22px;
            margin-bottom: 30px;
        }

        .chart-grid.page1-charts {
            grid-template-columns: repeat(2, 1fr);
        }

        .chart-grid.two { grid-template-columns: repeat(2, 1fr); }
        .chart-grid.page3-two { display: flex; gap: 20px; align-items: stretch; }
        .chart-grid.single { grid-template-columns: 1fr; }

        .chart-card {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: 16px 18px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .chart-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .chart-title {
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-secondary);
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
            letter-spacing: 0.3px;
            line-height: 1.4;
        }

        .guide-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 20px;
            margin-bottom: 26px;
        }

        .guide-card {
            background: var(--surface);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            padding: 16px 18px;
            box-shadow: var(--shadow-sm);
            display: flex;
            gap: 14px;
            align-items: flex-start;
        }

        .guide-icon {
            width: 38px;
            height: 38px;
            border-radius: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: var(--primary-light);
            color: var(--primary-dark);
            font-size: 18px;
            flex: 0 0 auto;
        }

        .guide-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 6px;
        }

        .guide-text {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .guide-list {
            margin: 8px 0 0 18px;
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .chart-container {
            position: relative;
            height: clamp(220px, 28vw, 340px);
        }

        .chart-container.small { height: clamp(180px, 22vw, 240px); }
        .chart-container.tall { height: clamp(260px, 36vw, 420px); }
        .chart-container.gauge { height: clamp(220px, 30vw, 320px); }

        .stacked-col {
            flex: 0 0 380px;
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .stacked-col .chart-card {
            display: flex;
            flex-direction: column;
            flex: 1 1 0;
        }

        .stacked-col .chart-container {
            flex: 1 1 0;
            height: auto;
            min-height: 140px;
        }

        .table-col {
            flex: 1;
            display: flex;
        }

        .table-col .chart-card {
            width: 100%;
            display: flex;
            flex-direction: column;
        }

        .table-col .chart-card > div + div {
            flex: 1 1 auto;
            overflow-x: auto;
            max-height: 650px;
        }

        .page4-two .stacked-col .chart-card:first-child { display: none; }

        .compare-row {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 24px;
            margin-bottom: 24px;
            align-items: stretch;
        }

        .compare-row .chart-card {
            display: flex;
            flex-direction: column;
        }

        .compare-row .chart-container {
            flex: 1 1 auto;
            height: auto;
            min-height: 220px;
        }

        .approval-row {
            grid-template-columns: 2fr 1fr;
            gap: 24px;
        }

        .approval-row .filter-panel {
            max-height: none;
            overflow: visible;
            border: 1px solid var(--border);
            background: linear-gradient(180deg, #ffffff 0%, #fff7f7 100%);
            padding: 18px;
            gap: 14px;
        }

        .approval-row .kpi-card {
            min-height: 120px;
            border-left-color: var(--secondary);
            padding: 14px 16px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            gap: 8px;
            height: 100%;
        }

        .approval-row .kpi-label {
            color: var(--primary-dark);
            background: var(--primary-light);
            display: inline-flex;
            padding: 4px 10px;
            border-radius: 999px;
            letter-spacing: 0.2px;
            text-transform: none;
            font-size: 13px;
            margin-top: 0;
            order: -1;
        }

        .approval-row .kpi-value {
            font-size: 22px;
        }

        .approval-row .kpi-value-row {
            flex-direction: column;
            align-items: flex-start;
            gap: 6px;
        }

        .approval-row .kpi-side {
            text-align: left;
            min-width: 0;
        }

        .approval-row .kpi-card.card-thu { border-left-color: var(--success); }
        .approval-row .kpi-card.card-chi { border-left-color: var(--danger); }
        .approval-row .kpi-card.card-net { border-left-color: var(--info); }
        .approval-row .kpi-card.card-fhi { border-left-color: var(--warning); }

        .approval-row .kpi-card.card-thu .kpi-label { color: var(--success); background: rgba(16, 163, 74, 0.12); }
        .approval-row .kpi-card.card-chi .kpi-label { color: var(--danger); background: rgba(220, 38, 38, 0.12); }
        .approval-row .kpi-card.card-net .kpi-label { color: var(--info); background: rgba(37, 99, 235, 0.12); }
        .approval-row .kpi-card.card-fhi .kpi-label { color: var(--warning); background: rgba(245, 158, 11, 0.12); }

        .approval-row .filter-label {
            text-transform: uppercase;
            letter-spacing: 0.4px;
            font-size: 11px;
            color: var(--text-secondary);
        }

        .approval-row .filter-checklist {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 8px;
        }

        .approval-row .filter-item {
            border: 1px solid var(--border);
            background: var(--surface-2);
        }

        .kpi-value-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }

        .kpi-side {
            text-align: right;
            font-size: 11px;
            min-width: 120px;
        }

        .kpi-side .kpi-sub {
            margin-top: 2px;
        }

        .toggle-group {
            display: inline-flex;
            gap: 6px;
            background: var(--surface);
            border-radius: 12px;
            padding: 6px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
            margin-bottom: 18px;
        }

        .page2-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 20px;
        }

        .page2-header .toggle-group {
            margin-bottom: 0;
        }

        .toggle-btn {
            border: none;
            background: transparent;
            padding: 8px 14px;
            font-size: 12px;
            border-radius: 8px;
            cursor: pointer;
            color: var(--text-secondary);
            font-weight: 600;
            transition: background 0.2s ease, color 0.2s ease;
        }

        .toggle-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 6px 14px rgba(200, 30, 30, 0.3);
        }

        .filter-panel {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: 16px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .filter-group { margin-bottom: 12px; display: flex; flex-direction: column; }
        .filter-label { font-size: 12px; font-weight: 600; margin-bottom: 6px; color: var(--text-primary); }
        .filter-select {
            width: 100%;
            padding: 9px 10px;
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 12px;
            background: var(--surface);
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 12px;
        }

        .multi-select {
            position: relative;
        }

        .multi-select-trigger {
            width: 100%;
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 8px 10px;
            background: var(--surface);
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            cursor: pointer;
            text-align: left;
        }

        .multi-select-text {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .multi-select-placeholder {
            color: var(--text-secondary);
            font-size: 11px;
        }

        .multi-select-count {
            color: var(--text-primary);
            font-weight: 600;
            font-size: 12px;
        }

        .multi-select-caret {
            color: var(--text-secondary);
            font-size: 12px;
        }

        .multi-select-menu {
            position: absolute;
            top: calc(100% + 6px);
            left: 0;
            right: 0;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 10px;
            box-shadow: var(--shadow-md);
            padding: 6px;
            max-height: 220px;
            overflow-y: auto;
            z-index: 10;
            display: none;
        }

        .multi-select.open .multi-select-menu { display: block; }

        .multi-select-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            font-size: 11px;
            padding: 7px 8px;
            border-radius: 8px;
            border: 1px solid var(--border-soft);
            background: var(--surface-2);
            line-height: 1.3;
            cursor: pointer;
        }

        .multi-select-item input { accent-color: var(--primary); margin-top: 2px; }
        .multi-select-item:hover { background: var(--surface); border-color: var(--border); }
        .multi-select-item.thu { border-left: 3px solid var(--success); }
        .multi-select-item.chi { border-left: 3px solid var(--danger); }

        .filter-checklist {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 6px;
            max-height: 130px;
            overflow-y: auto;
            padding-right: 4px;
            align-content: start;
            grid-auto-rows: minmax(32px, auto);
        }

        .filter-checklist.tall { max-height: 160px; }

        .filter-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            font-size: 11px;
            background: var(--surface-2);
            border-radius: 10px;
            padding: 8px 10px;
            width: 100%;
            min-height: 36px;
            box-sizing: border-box;
            white-space: normal;
            overflow: hidden;
            text-overflow: ellipsis;
            border: 1px solid var(--border-soft);
            line-height: 1.3;
        }

        .filter-item:hover { border-color: var(--border); background: var(--surface); }

        .filter-item input { accent-color: var(--primary); flex: 0 0 auto; margin-top: 2px; }

        .matrix-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            background: var(--surface);
        }

        .matrix-table thead {
            background: linear-gradient(135deg, #FEE2E2 0%, #FFF1F2 100%);
            position: sticky;
            top: 0;
            z-index: 2;
        }

        .matrix-table.p2-detail-table thead {
            background: linear-gradient(135deg, #E0F2FE 0%, #F8FAFC 100%);
        }

        .matrix-table.p2-detail-table th { color: #0F172A; }

        .matrix-table th {
            padding: 11px 8px;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border);
            white-space: nowrap;
            background: inherit;
            z-index: 3;
        }

        .matrix-table td {
            padding: 10px 8px;
            border-bottom: 1px solid var(--border);
            text-align: right;
            color: var(--text-secondary);
        }

        .matrix-table td:first-child {
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            background: var(--surface-2);
            position: sticky;
            left: 0;
        }

        .matrix-table .row-group td {
            font-weight: 700;
            background: var(--surface-2);
            color: var(--text-primary);
            text-align: left;
        }

        .matrix-table .row-group.row-group-thu td {
            background: rgba(16, 163, 74, 0.12);
            color: var(--success);
        }

        .matrix-table .row-group.row-group-chi td {
            background: rgba(220, 38, 38, 0.12);
            color: var(--danger);
        }

        .matrix-table .row-child td {
            font-size: 12px;
        }

        .matrix-table .row-child td:first-child {
            padding-left: 18px;
        }

        .matrix-table tbody tr:nth-child(even) td { background: #FBFCFE; }
        .matrix-table tbody tr:nth-child(even) td:first-child { background: #F1F5F9; }
        .matrix-table tbody tr:hover td { background: #F1F5F9; }
        .matrix-table tbody tr:hover td:first-child { background: #E2E8F0; }

        .matrix-table tbody tr.row-group td { background: var(--surface-2) !important; }
        .matrix-table tbody tr.row-group.row-group-thu td { background: rgba(16, 163, 74, 0.12) !important; color: var(--success); }
        .matrix-table tbody tr.row-group.row-group-chi td { background: rgba(220, 38, 38, 0.12) !important; color: var(--danger); }

        .risk-high { color: var(--danger); font-weight: 600; }
        .risk-medium { color: var(--warning); font-weight: 600; }
        .risk-low { color: var(--success); font-weight: 600; }

        #page3 > .kpi-grid.page3-kpis,
        #page3 > .chart-grid.single,
        #page3 > .chart-grid.two,
        #page3 > .chart-card {
            display: none;
        }

        #page4 > .kpi-grid.page4-kpis,
        #page4 > .chart-grid,
        #page4 > .chart-card {
            display: none;
        }

        @media (max-width: 1400px) {
            .chart-grid { grid-template-columns: repeat(2, 1fr); }
            .kpi-grid { grid-template-columns: repeat(2, 1fr); }
            .kpi-grid.page1-kpis { grid-template-columns: repeat(2, 1fr); }
            .kpi-grid.page3-kpis, .kpi-grid.page4-kpis { grid-template-columns: repeat(2, 1fr); }
            .compare-row { grid-template-columns: 1fr; }
        }

        @media (max-width: 1200px) {
            .chart-grid.page3-two { flex-direction: column; }
            .chart-grid.page3-two > div:first-child { flex: 0 0 auto; width: 100%; }
            .main-content { padding: 28px 32px 40px; }
            .chart-container.tall { height: clamp(240px, 38vw, 360px); }
        }

        @media (max-width: 900px) {
            .sidebar {
                position: sticky;
                top: 0;
                width: 100%;
                height: auto;
                padding: 12px 14px;
                display: grid;
                grid-template-columns: repeat(2, minmax(0, 1fr));
                gap: 8px;
            }
            .logo { grid-column: 1 / -1; margin-bottom: 4px; padding: 8px 10px; }
            .nav-item { margin-bottom: 0; justify-content: center; font-size: 12px; }
            .main-content { margin-left: 0; width: 100%; padding: 20px; }
            .chart-grid, .chart-grid.two { grid-template-columns: 1fr; }
            .guide-grid { grid-template-columns: 1fr; }
            .kpi-grid { grid-template-columns: 1fr; }
            .filter-checklist { grid-template-columns: 1fr; }
            .filter-row { grid-template-columns: 1fr; }
            .page2-header { flex-direction: column; align-items: flex-start; }
            .page2-header .toggle-group { width: 100%; justify-content: space-between; }
        }

        @media (max-width: 720px) {
            .sidebar { grid-template-columns: 1fr; }
            .nav-item { justify-content: flex-start; }
            .page-title { font-size: 24px; }
            .kpi-value { font-size: 20px; }
            .section-title { font-size: 13px; }
        }
        /* ============================= */
        /* FIX GAUGE CHART ‚Äì KH√îNG B·ªä C·∫ÆT LABEL */
        /* ============================= */

        .chart-container.gauge {
            height: 260px;              /* üëà QUAN TR·ªåNG: ƒë·ªß ch·ªó cho label d∆∞·ªõi */
            display: flex;
            align-items: center;
            justify-content: center;
            padding-bottom: 24px;       /* üëà ch·ª´a kh√¥ng gian cho text */
        }

        .chart-container.gauge canvas {
            width: 100% !important;
            max-width: 420px;
            height: auto !important;    /* üëà KH√îNG scale height */
        }

    </style>
</head>
<body>
    <div class="app-wrapper">
        <nav class="sidebar">
            <div class="logo">
                <div class="logo-icon">üìä</div>
                <div class="logo-text">QU·∫¢N TR·ªä<br>NG√ÇN S√ÅCH</div>
            </div>
            <div class="nav-item active" data-page="5"><span>üìò</span> H∆∞·ªõng d·∫´n</div>
            <div class="nav-item" data-page="1"><span>üìä</span> T·ªïng Quan</div>
            <div class="nav-item" data-page="2"><span>‚úÖ</span> Duy·ªát Ng√¢n S√°ch</div>
            <div class="nav-item" data-page="3"><span>üí∞</span> T·ªïng Thu</div>
            <div class="nav-item" data-page="4"><span>üí∏</span> T·ªïng Chi</div>
        </nav>

        <main class="main-content">
            <div id="page1" class="page">
                <div class="page-header">
                    <h1 class="page-title">T·ªïng Quan Danh M·ª•c D·ª± √Ån</h1>
                    <p class="page-subtitle">ƒê√°nh gi√° nhanh ng√¢n s√°ch v√† hi·ªáu qu·∫£ thu chi to√†n c√¥ng ty</p>
                </div>

                <div class="kpi-grid page1-kpis">
                    <div class="kpi-card kpi-thu"><div class="kpi-label">Ng√¢n s√°ch t·ªïng - Thu</div><div class="kpi-value">560.0 T·ª∑</div><div class="kpi-change positive">Duy·ªát 12/2025</div></div>
                    <div class="kpi-card kpi-thu"><div class="kpi-label">Ng√¢n s√°ch chi ti·∫øt - Thu</div><div class="kpi-value">560.0 T·ª∑</div><div class="kpi-change positive">Duy·ªát 12/2025</div></div>
                    <div class="kpi-card kpi-thu"><div class="kpi-label">T·ªïng th·ª±c thu</div><div class="kpi-value">545.0 T·ª∑</div><div class="kpi-change positive">+4.8% so v·ªõi k·ª≥ tr∆∞·ªõc</div></div>
                    <div class="kpi-card"><div class="kpi-label">Ng√¢n s√°ch t·ªïng - Chi</div><div class="kpi-value">390.0 T·ª∑</div><div class="kpi-change positive">Duy·ªát 12/2025</div></div>
                    <div class="kpi-card"><div class="kpi-label">Ng√¢n s√°ch chi ti·∫øt - Chi</div><div class="kpi-value">390.0 T·ª∑</div><div class="kpi-change positive">Duy·ªát 12/2025</div></div>
                    <div class="kpi-card"><div class="kpi-label">T·ªïng th·ª±c chi</div><div class="kpi-value">382.0 T·ª∑</div><div class="kpi-change negative">+6.1% so v·ªõi k·ª≥ tr∆∞·ªõc</div></div>
                </div>

                <div class="section-title">Ng√¢n s√°ch theo d·ª± √°n</div>
                <div class="chart-grid two">
                    <div class="chart-card"><div class="chart-title">Ng√¢n s√°ch t·ªïng vs chi ti·∫øt - Thu</div><div class="chart-container"><canvas id="chartP1Revenue"></canvas></div></div>
                    <div class="chart-card"><div class="chart-title">Ng√¢n s√°ch t·ªïng vs chi ti·∫øt - Chi</div><div class="chart-container"><canvas id="chartP1Cost"></canvas></div></div>
                </div>

                <div class="section-title">Th·ª±c t·∫ø vs ng√¢n s√°ch</div>
                <div class="chart-grid two">
                    <div class="chart-card"><div class="chart-title">Thu theo d·ª± √°n vs Ng√¢n s√°ch (k√®m t·ª∑ l·ªá)</div><div class="chart-container"><canvas id="chartP1RevenueActual"></canvas></div></div>
                    <div class="chart-card"><div class="chart-title">Chi theo d·ª± √°n vs Ng√¢n s√°ch (k√®m t·ª∑ l·ªá)</div><div class="chart-container"><canvas id="chartP1CostActual"></canvas></div></div>
                </div>
            </div>

            <div id="page2" class="page">
                <div class="page-header page2-header">
                    <div>
                        <h1 class="page-title">ƒê√°nh Gi√° & Duy·ªát Ng√¢n S√°ch</h1>
                        <p class="page-subtitle">So s√°nh Ver 0 v√† Ver Latest ƒë·ªÉ quy·∫øt ƒë·ªãnh ƒëi·ªÅu ch·ªânh</p>
                    </div>
                    <div class="toggle-group">
                        <button class="toggle-btn active" data-mode="total">Ng√¢n s√°ch t·ªïng (1-3)</button>
                        <button class="toggle-btn" data-mode="detail">Ng√¢n s√°ch chi ti·∫øt (1-4)</button>
                    </div>
                </div>

                <div class="section-title">So s√°nh Thu & Chi</div>
                <div class="kpi-grid page2-summary">
                    <div class="kpi-card kpi-thu">
                        <div class="kpi-label">T·ªïng thu (Ver Latest)</div>
                        <div class="kpi-value-row">
                            <div class="kpi-value" id="p2RevenueLatest">0</div>
                            <div class="kpi-side">
                                <div class="kpi-sub">T·ªïng thu (Ver 0): <span id="p2RevenueVer0">0</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="kpi-card kpi-thu">
                        <div class="kpi-label">Ch√™nh l·ªách thu</div>
                        <div class="kpi-value-row">
                            <div class="kpi-value" id="p2RevenueDelta">0</div>
                            <div class="kpi-side">
                                <div class="kpi-sub">% ch√™nh l·ªách: <span id="p2RevenueDeltaPct">0</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">T·ªïng chi (Ver Latest)</div>
                        <div class="kpi-value-row">
                            <div class="kpi-value" id="p2CostLatest">0</div>
                            <div class="kpi-side">
                                <div class="kpi-sub">T·ªïng chi (Ver 0): <span id="p2CostVer0">0</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">Ch√™nh l·ªách chi</div>
                        <div class="kpi-value-row">
                            <div class="kpi-value" id="p2CostDelta">0</div>
                            <div class="kpi-side">
                                <div class="kpi-sub">% ch√™nh l·ªách: <span id="p2CostDeltaPct">0</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chart-grid two">
                    <div class="chart-card"><div class="chart-title">So s√°nh Thu theo Version (Theo d·ª± √°n)</div><div class="chart-container"><canvas id="chartP2Revenue"></canvas></div></div>
                    <div class="chart-card"><div class="chart-title">So s√°nh Chi theo Version (Theo d·ª± √°n)</div><div class="chart-container"><canvas id="chartP2Cost"></canvas></div></div>
                </div>

                <div class="section-title">B·∫£ng chi ti·∫øt ƒëi·ªÅu ch·ªânh</div>
                <div class="chart-card">
                    <div class="chart-title">Chi ti·∫øt theo h·∫°ng m·ª•c</div>
                    <div style="overflow-x: auto; max-height: 380px;">
                        <table class="matrix-table p2-detail-table">
                            <thead>
                                <tr>
                                    <th>H·∫°ng m·ª•c</th>
                                    <th>Ver 0</th>
                                    <th>Ver Latest</th>
                                    <th>Ch√™nh l·ªách</th>
                                    <th>% ch√™nh l·ªách</th>
                                    <th>Ver ƒëi·ªÅu ch·ªânh</th>
                                </tr>
                            </thead>
                            <tbody id="p2DetailBody"></tbody>
                        </table>
                    </div>
                </div>

                <div class="section-title">ƒêi·ªÅu ch·ªânh & duy·ªát ng√¢n s√°ch</div>
                <div class="compare-row approval-row">
                    <div class="filter-panel">
                        <div class="filter-group">
                            <div class="filter-label">D·ª± √°n</div>
                            <div class="multi-select" data-filter="projects">
                                <button type="button" class="multi-select-trigger">
                                    <span class="multi-select-text">
                                        <span class="multi-select-placeholder">Ch·ªçn d·ª± √°n</span>
                                        <span class="multi-select-count">T·∫•t c·∫£</span>
                                    </span>
                                    <span class="multi-select-caret">‚ñæ</span>
                                </button>
                                <div class="multi-select-menu">
                                    <label class="multi-select-item"><input type="checkbox" data-role="project" value="DA Alpha" checked> DA Alpha</label>
                                    <label class="multi-select-item"><input type="checkbox" data-role="project" value="DA Beta" checked> DA Beta</label>
                                    <label class="multi-select-item"><input type="checkbox" data-role="project" value="DA Gamma" checked> DA Gamma</label>
                                    <label class="multi-select-item"><input type="checkbox" data-role="project" value="DA Delta" checked> DA Delta</label>
                                    <label class="multi-select-item"><input type="checkbox" data-role="project" value="DA Epsilon" checked> DA Epsilon</label>
                                </div>
                            </div>
                        </div>

                        <div class="filter-row">
                            <div class="filter-group">
                                <div class="filter-label">THU t·∫ßng 1</div>
                                <div class="multi-select" data-filter="thu-level1">
                                    <button type="button" class="multi-select-trigger">
                                        <span class="multi-select-text">
                                            <span class="multi-select-placeholder">Ch·ªçn h·∫°ng m·ª•c THU</span>
                                            <span class="multi-select-count">T·∫•t c·∫£</span>
                                        </span>
                                        <span class="multi-select-caret">‚ñæ</span>
                                    </button>
                                    <div class="multi-select-menu">
                                        <label class="multi-select-item thu"><input type="checkbox" data-role="approval-item" data-type="thu" data-level="1" data-code="THU.01" checked> THU.01 - Thu t·ª´ Ch·ªß ƒê·∫ßu T∆∞</label>
                                        <label class="multi-select-item thu"><input type="checkbox" data-role="approval-item" data-type="thu" data-level="1" data-code="THU.02" checked> THU.02 - Thu Ho·∫°t ƒê·ªông T√†i Ch√≠nh</label>
                                        <label class="multi-select-item thu"><input type="checkbox" data-role="approval-item" data-type="thu" data-level="1" data-code="THU.03" checked> THU.03 - Thu t·ª´ Ngu·ªìn Kh√°c</label>
                                        <label class="multi-select-item thu"><input type="checkbox" data-role="approval-item" data-type="thu" data-level="1" data-code="THU.04" checked> THU.04 - Thu Kh√°c</label>
                                    </div>
                                </div>
                            </div>
                            <div class="filter-group">
                                <div class="filter-label">CHI t·∫ßng 1</div>
                                <div class="multi-select" data-filter="chi-level1">
                                    <button type="button" class="multi-select-trigger">
                                        <span class="multi-select-text">
                                            <span class="multi-select-placeholder">Ch·ªçn h·∫°ng m·ª•c CHI</span>
                                            <span class="multi-select-count">T·∫•t c·∫£</span>
                                        </span>
                                        <span class="multi-select-caret">‚ñæ</span>
                                    </button>
                                    <div class="multi-select-menu">
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="1" data-code="CHI.01" checked> CHI.01 - Chi cho ph√°p l√Ω d·ª± √°n</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="1" data-code="CHI.02" checked> CHI.02 - Chi cho ki·∫øn thi·∫øt c∆° b·∫£n</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="1" data-code="CHI.03" checked> CHI.03 - Chi cho c√¥ng t√°c b√°n h√†ng</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="1" data-code="CHI.04" checked> CHI.04 - Chi c√¥ng t√°c chu·∫©n b·ªã</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="1" data-code="CHI.05" checked> CHI.05 - Chi c√¥ng t√°c thi·∫øt b·ªã</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="1" data-code="CHI.06" checked> CHI.06 - Chi nh√¢n c√¥ng & th·∫ßu ph·ª•</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="1" data-code="CHI.07" checked> CHI.07 - Chi v·∫≠t t∆∞ & NCC</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="1" data-code="CHI.08" checked> CHI.08 - Chi cho ho·∫°t ƒë·ªông tr·ª±c ti·∫øp</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="filter-row">
                            <div class="filter-group">
                                <div class="filter-label">THU t·∫ßng 2</div>
                                <div class="multi-select" data-filter="thu-level2">
                                    <button type="button" class="multi-select-trigger">
                                        <span class="multi-select-text">
                                            <span class="multi-select-placeholder">Ch·ªçn h·∫°ng m·ª•c THU t·∫ßng 2</span>
                                            <span class="multi-select-count">T·∫•t c·∫£</span>
                                        </span>
                                        <span class="multi-select-caret">‚ñæ</span>
                                    </button>
                                    <div class="multi-select-menu">
                                        <label class="multi-select-item thu"><input type="checkbox" data-role="approval-item" data-type="thu" data-level="2" data-code="THU.01.01" checked> THU.01.01 - T∆∞ v·∫•n</label>
                                        <label class="multi-select-item thu"><input type="checkbox" data-role="approval-item" data-type="thu" data-level="2" data-code="THU.01.02" checked> THU.01.02 - Rao s·ª±</label>
                                        <label class="multi-select-item thu"><input type="checkbox" data-role="approval-item" data-type="thu" data-level="2" data-code="THU.01.03" checked> THU.01.03 - B·∫£n quy·ªÅn & Kh√°c</label>
                                        <label class="multi-select-item thu"><input type="checkbox" data-role="approval-item" data-type="thu" data-level="2" data-code="THU.02.01" checked> THU.02.01 - L√£i su·∫•t ng√¢n h√†ng</label>
                                        <label class="multi-select-item thu"><input type="checkbox" data-role="approval-item" data-type="thu" data-level="2" data-code="THU.02.02" checked> THU.02.02 - C·ªï t·ª©c & Kh√°c</label>
                                        <label class="multi-select-item thu"><input type="checkbox" data-role="approval-item" data-type="thu" data-level="2" data-code="THU.03.01" checked> THU.03.01 - B·∫£o t√≠n v·ªá th·∫≥ng</label>
                                        <label class="multi-select-item thu"><input type="checkbox" data-role="approval-item" data-type="thu" data-level="2" data-code="THU.03.02" checked> THU.03.02 - Kh√°c</label>
                                        <label class="multi-select-item thu"><input type="checkbox" data-role="approval-item" data-type="thu" data-level="2" data-code="THU.04.01" checked> THU.04.01 - Doanh thu kh√°c 1</label>
                                        <label class="multi-select-item thu"><input type="checkbox" data-role="approval-item" data-type="thu" data-level="2" data-code="THU.04.02" checked> THU.04.02 - Doanh thu kh√°c 2</label>
                                    </div>
                                </div>
                            </div>
                            <div class="filter-group">
                                <div class="filter-label">CHI t·∫ßng 2</div>
                                <div class="multi-select" data-filter="chi-level2">
                                    <button type="button" class="multi-select-trigger">
                                        <span class="multi-select-text">
                                            <span class="multi-select-placeholder">Ch·ªçn h·∫°ng m·ª•c CHI t·∫ßng 2</span>
                                            <span class="multi-select-count">T·∫•t c·∫£</span>
                                        </span>
                                        <span class="multi-select-caret">‚ñæ</span>
                                    </button>
                                    <div class="multi-select-menu">
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.01.10" checked> CHI.01.10 - H·ªì s∆° ph√°p l√Ω d·ª± √°n</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.01.20" checked> CHI.01.20 - Ph√≠ gi·∫•y ph√©p x√¢y d·ª±ng</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.01.30" checked> CHI.01.30 - T∆∞ v·∫•n ph√°p l√Ω & h·ª£p ƒë·ªìng</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.01.40" checked> CHI.01.40 - L·ªá ph√≠ th·∫©m ƒë·ªãnh</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.02.10" checked> CHI.02.10 - Kh·∫£o s√°t ƒë·ªãa h√¨nh</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.02.20" checked> CHI.02.20 - Thi·∫øt k·∫ø c∆° s·ªü</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.02.30" checked> CHI.02.30 - Thi·∫øt k·∫ø k·ªπ thu·∫≠t</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.02.40" checked> CHI.02.40 - Th·∫©m tra thi·∫øt k·∫ø</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.03.10" checked> CHI.03.10 - Marketing & truy·ªÅn th√¥ng</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.03.20" checked> CHI.03.20 - S√†n giao d·ªãch & m√¥i gi·ªõi</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.03.30" checked> CHI.03.30 - ChƒÉm s√≥c kh√°ch h√†ng</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.03.40" checked> CHI.03.40 - Chi ph√≠ s·ª± ki·ªán b√°n h√†ng</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.04.00" checked> CHI.04.00 - Chi ph√≠ b·∫£o l√£nh, b·∫£o hi·ªÉm</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.04.20" checked> CHI.04.20 - An to√†n lao ƒë·ªông & VSMT</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.04.30" checked> CHI.04.30 - An ninh cho c√¥ng tr∆∞·ªùng</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.04.40" checked> CHI.04.40 - Tr·∫Øc ƒë·∫°c c√¥ng tr√¨nh</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.05.10" checked> CHI.05.10 - Thi·∫øt b·ªã thi c√¥ng ch√≠nh</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.05.20" checked> CHI.05.20 - Thi·∫øt b·ªã ph·ª• tr·ª£</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.05.30" checked> CHI.05.30 - L·∫Øp ƒë·∫∑t & hi·ªáu ch·ªânh</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.05.40" checked> CHI.05.40 - B·∫£o tr√¨ thi·∫øt b·ªã</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.06.10" checked> CHI.06.10 - Nh√¢n c√¥ng tr·ª±c ti·∫øp</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.06.20" checked> CHI.06.20 - Th·∫ßu ph·ª• k·∫øt c·∫•u</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.06.30" checked> CHI.06.30 - Th·∫ßu ph·ª• ho√†n thi·ªán</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.06.40" checked> CHI.06.40 - An to√†n & b·∫£o h·ªô lao ƒë·ªông</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.07.10" checked> CHI.07.10 - V·∫≠t t∆∞ ch√≠nh</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.07.20" checked> CHI.07.20 - V·∫≠t t∆∞ ph·ª•</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.07.30" checked> CHI.07.30 - V·∫≠n chuy·ªÉn & b·ªëc d·ª°</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.07.40" checked> CHI.07.40 - Nh√† cung c·∫•p chi·∫øn l∆∞·ª£c</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.08.10" checked> CHI.08.10 - V·∫≠n h√†nh c√¥ng tr∆∞·ªùng</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.08.20" checked> CHI.08.20 - Nhi√™n li·ªáu & nƒÉng l∆∞·ª£ng</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.08.30" checked> CHI.08.30 - B·∫£o v·ªá & an ninh</label>
                                        <label class="multi-select-item chi"><input type="checkbox" data-role="approval-item" data-type="chi" data-level="2" data-code="CHI.08.40" checked> CHI.08.40 - H·∫≠u c·∫ßn hi·ªán tr∆∞·ªùng</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="kpi-grid page2-approval">
                        <div class="kpi-card card-thu">
                            <div class="kpi-value-row">
                                <div class="kpi-value" id="p2AfterRevenue">0</div>
                                <div class="kpi-side">
                                    <div class="kpi-sub">Tr∆∞·ªõc: <span id="p2BeforeRevenue">0.0 T·ª∑</span></div>
                                    <div class="kpi-sub kpi-delta" id="p2DeltaRevenue">Œî 0.0 T·ª∑</div>
                                </div>
                            </div>
                            <div class="kpi-label">T·ªïng thu sau duy·ªát</div>
                        </div>
                        <div class="kpi-card card-chi">
                            <div class="kpi-value-row">
                                <div class="kpi-value" id="p2AfterCost">0</div>
                                <div class="kpi-side">
                                    <div class="kpi-sub">Tr∆∞·ªõc: <span id="p2BeforeCost">0.0 T·ª∑</span></div>
                                    <div class="kpi-sub kpi-delta" id="p2DeltaCost">Œî 0.0 T·ª∑</div>
                                </div>
                            </div>
                            <div class="kpi-label">T·ªïng chi sau duy·ªát</div>
                        </div>
                        <div class="kpi-card card-net">
                            <div class="kpi-value-row">
                                <div class="kpi-value" id="p2AfterNet">0</div>
                                <div class="kpi-side">
                                    <div class="kpi-sub">Tr∆∞·ªõc: <span id="p2BeforeNet">0.0 T·ª∑</span></div>
                                    <div class="kpi-sub kpi-delta" id="p2DeltaNet">Œî 0.0 T·ª∑</div>
                                </div>
                            </div>
                            <div class="kpi-label">Ng√¢n s√°ch sau duy·ªát (Net)</div>
                        </div>
                        <div class="kpi-card card-fhi">
                            <div class="kpi-value-row">
                                <div class="kpi-value" id="p2AfterFhi">0</div>
                                <div class="kpi-side">
                                    <div class="kpi-sub">Tr∆∞·ªõc: <span id="p2BeforeFhi">0.00</span></div>
                                    <div class="kpi-sub kpi-delta" id="p2DeltaFhi">Œî 0.00</div>
                                </div>
                            </div>
                            <div class="kpi-label">FHI sau duy·ªát</div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="page3" class="page">
                <div class="page-header">
                    <h1 class="page-title">T√¨nh H√¨nh Thu Th·ª±c T·∫ø</h1>
                    <p class="page-subtitle">Ph√¢n t√≠ch chi ti·∫øt doanh thu theo danh m·ª•c v√† kho·∫£n m·ª•c chi ti·∫øt</p>
                </div>

                <div class="page3-content">
                    <div class="chart-grid">
                        <div class="chart-card" style="position: relative;">
                            <div class="chart-title">üéØ T·ªïng Doanh Thu So V·ªõi K·∫ø Ho·∫°ch</div>
                            <div class="chart-container small" style="display: flex; align-items: center; justify-content: center; padding: 12px;">
                                <canvas
                                    id="chart6"
                                    width="420"
                                    height="260">
                                </canvas>
                            </div>
                        </div>
                        <div class="chart-card"><div class="chart-title">üìä Doanh Thu: K·∫ø Ho·∫°ch vs Th·ª±c T·∫ø</div><div class="chart-container"><canvas id="chart7"></canvas></div></div>
                        <div class="chart-card"><div class="chart-title">üìà Doanh Thu Th·ª±c T·∫ø vs NƒÉm Ngo√°i</div><div class="chart-container"><canvas id="chart8"></canvas></div></div>
                    </div>

                    <div class="chart-grid page3-two" style="padding: 20px 0;">
                        <div class="stacked-col">
                            <div class="chart-card"><div class="chart-title">üíº THU.01 - Thu t·ª´ Ch·ªß ƒê·∫ßu T∆∞ (Chi ti·∫øt 3 kho·∫£n ch√≠nh)</div><div class="chart-container tall"><canvas id="chart8b"></canvas></div></div>
                            <div class="chart-card"><div class="chart-title">üìä Th·ª±c T·∫ø vs K·∫ø Ho·∫°ch</div><div class="chart-container tall"><canvas id="chart8c"></canvas></div></div>
                        </div>
                        <div class="table-col">
                            <div class="chart-card"><div class="chart-title">üìã Chi Ti·∫øt Doanh Thu Theo H·∫°ng M·ª•c - 12 Th√°ng</div><div style="overflow-x: auto; max-height: 650px;"><table class="matrix-table"><thead><tr><th>Danh M·ª•c & H·∫°ng M·ª•c</th><th>T1</th><th>T2</th><th>T3</th><th>T4</th><th>T5</th><th>T6</th><th>T7</th><th>T8</th><th>T9</th><th>T10</th><th>T11</th><th>T12</th><th>T·ªïng</th><th>%</th></tr></thead><tbody><tr style="background: #fff3cd; font-weight: bold;"><td>THU.01 - Thu t·ª´ CDT</td><td>7.2</td><td>7.5</td><td>7.8</td><td>8.1</td><td>8.4</td><td>8.7</td><td>9.0</td><td>9.3</td><td>9.6</td><td>9.9</td><td>10.2</td><td>10.5</td><td>105.2</td><td>72.7%</td></tr><tr><td style="padding-left: 30px;">THU.01.01 - T∆∞ v·∫•n</td><td>3.2</td><td>3.3</td><td>3.5</td><td>3.6</td><td>3.8</td><td>3.9</td><td>4.1</td><td>4.2</td><td>4.4</td><td>4.5</td><td>4.7</td><td>4.8</td><td>47.0</td><td>32.5%</td></tr><tr><td style="padding-left: 30px;">THU.01.02 - Rao s·ª±</td><td>2.5</td><td>2.6</td><td>2.7</td><td>2.8</td><td>2.9</td><td>3.0</td><td>3.1</td><td>3.2</td><td>3.3</td><td>3.4</td><td>3.5</td><td>3.6</td><td>36.6</td><td>25.3%</td></tr><tr><td style="padding-left: 30px;">THU.01.03 - B·∫£n quy·ªÅn & Kh√°c</td><td>1.5</td><td>1.6</td><td>1.6</td><td>1.7</td><td>1.7</td><td>1.8</td><td>1.8</td><td>1.9</td><td>1.9</td><td>2.0</td><td>2.0</td><td>2.1</td><td>21.6</td><td>14.9%</td></tr><tr style="background: #e3f2fd; font-weight: bold;"><td>THU.02 - Thu Ho·∫°t ƒê·ªông T√†i Ch√≠nh</td><td>1.5</td><td>1.6</td><td>1.6</td><td>1.7</td><td>1.7</td><td>1.8</td><td>1.8</td><td>1.9</td><td>1.9</td><td>2.0</td><td>2.0</td><td>2.1</td><td>21.6</td><td>14.9%</td></tr><tr><td style="padding-left: 30px;">THU.02.01 - L√£i su·∫•t ng√¢n h√†ng</td><td>0.9</td><td>0.9</td><td>0.9</td><td>1.0</td><td>1.0</td><td>1.0</td><td>1.1</td><td>1.1</td><td>1.1</td><td>1.2</td><td>1.2</td><td>1.2</td><td>12.6</td><td>8.7%</td></tr><tr><td style="padding-left: 30px;">THU.02.02 - C·ªï t·ª©c & Kh√°c</td><td>0.6</td><td>0.7</td><td>0.7</td><td>0.7</td><td>0.7</td><td>0.8</td><td>0.7</td><td>0.8</td><td>0.8</td><td>0.8</td><td>0.8</td><td>0.9</td><td>9.0</td><td>6.2%</td></tr><tr style="background: #f0f4f8; font-weight: bold;"><td>THU.03 - Thu t·ª´ Ngu·ªìn Kh√°c</td><td>1.2</td><td>1.2</td><td>1.2</td><td>1.3</td><td>1.3</td><td>1.4</td><td>1.4</td><td>1.4</td><td>1.5</td><td>1.5</td><td>1.5</td><td>1.6</td><td>16.5</td><td>11.4%</td></tr><tr><td style="padding-left: 30px;">THU.03.01 - B·∫£o t√≠n v·ªá th·∫≥ng</td><td>0.7</td><td>0.7</td><td>0.7</td><td>0.8</td><td>0.8</td><td>0.8</td><td>0.8</td><td>0.9</td><td>0.9</td><td>0.9</td><td>0.9</td><td>1.0</td><td>10.1</td><td>7.0%</td></tr><tr><td style="padding-left: 30px;">THU.03.02 - Kh√°c</td><td>0.5</td><td>0.5</td><td>0.5</td><td>0.5</td><td>0.5</td><td>0.6</td><td>0.6</td><td>0.5</td><td>0.6</td><td>0.6</td><td>0.6</td><td>0.6</td><td>6.4</td><td>4.4%</td></tr><tr style="background: #fce4ec; font-weight: bold;"><td>THU.04 - Thu Kh√°c</td><td>0.5</td><td>0.5</td><td>0.5</td><td>0.5</td><td>0.6</td><td>0.6</td><td>0.6</td><td>0.6</td><td>0.7</td><td>0.7</td><td>0.7</td><td>0.8</td><td>7.3</td><td>5.0%</td></tr><tr><td style="padding-left: 30px;">THU.04.01 - Doanh thu kh√°c 1</td><td>0.3</td><td>0.3</td><td>0.3</td><td>0.3</td><td>0.3</td><td>0.3</td><td>0.3</td><td>0.3</td><td>0.4</td><td>0.4</td><td>0.4</td><td>0.4</td><td>4.2</td><td>2.9%</td></tr><tr><td style="padding-left: 30px;">THU.04.02 - Doanh thu kh√°c 2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.3</td><td>0.3</td><td>0.3</td><td>0.3</td><td>0.3</td><td>0.3</td><td>0.3</td><td>0.4</td><td>3.1</td><td>2.1%</td></tr><tr style="background: var(--primary-light); font-weight: bold;"><td>T·ªîNG DOANH THU</td><td>10.4</td><td>10.8</td><td>11.1</td><td>11.6</td><td>12.0</td><td>12.5</td><td>12.8</td><td>13.2</td><td>13.7</td><td>14.1</td><td>14.6</td><td>15.0</td><td>150.8</td><td>100%</td></tr></tbody></table></div></div>
                        </div>
                    </div>
                </div>

                <div class="kpi-grid page3-kpis">
                    <div class="kpi-card"><div class="kpi-label">T·ªïng thu ng√¢n s√°ch</div><div class="kpi-value">560.0 T·ª∑</div><div class="kpi-change positive">K·∫ø ho·∫°ch</div></div>
                    <div class="kpi-card"><div class="kpi-label">T·ªïng th·ª±c thu</div><div class="kpi-value">545.0 T·ª∑</div><div class="kpi-change negative">-2.7%</div></div>
                    <div class="kpi-card"><div class="kpi-label">% ƒë·∫°t k·∫ø ho·∫°ch</div><div class="kpi-value">97.3%</div><div class="kpi-change positive">·ªîn ƒë·ªãnh</div></div>
                    <div class="kpi-card"><div class="kpi-label">D·ª± √°n kh√¥ng ƒë·∫°t</div><div class="kpi-value">2 d·ª± √°n</div><div class="kpi-change negative">C·∫ßn theo d√µi</div></div>
                </div>

                <div class="chart-grid single">
                    <div class="chart-card"><div class="chart-title">Xu h∆∞·ªõng thu: Ng√¢n s√°ch vs Th·ª±c thu</div><div class="chart-container"><canvas id="chartP3Trend"></canvas></div></div>
                </div>

                <div class="chart-grid two">
                    <div class="chart-card"><div class="chart-title">Thu ng√¢n s√°ch vs Th·ª±c thu theo d·ª± √°n</div><div class="chart-container"><canvas id="chartP3ByProject"></canvas></div></div>
                    <div class="chart-card"><div class="chart-title">Ch√™nh l·ªách thu theo d·ª± √°n</div><div class="chart-container"><canvas id="chartP3Variance"></canvas></div></div>
                </div>

                <div class="chart-card">
                    <div class="chart-title">B·∫£ng chi ti·∫øt thu theo d·ª± √°n</div>
                    <div style="overflow-x: auto; max-height: 360px;">
                        <table class="matrix-table">
                            <thead>
                                <tr>
                                    <th>D·ª± √°n</th>
                                    <th>Thu ng√¢n s√°ch</th>
                                    <th>Th·ª±c thu</th>
                                    <th>% ƒë·∫°t</th>
                                    <th>Xu h∆∞·ªõng</th>
                                </tr>
                            </thead>
                            <tbody id="p3DetailBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="page4" class="page">
                <div class="page-header">
                    <h1 class="page-title">T√¨nh H√¨nh Chi Th·ª±c T·∫ø</h1>
                    <p class="page-subtitle">Ki·ªÉm so√°t chi ti√™u so v·ªõi ng√¢n s√°ch</p>
                </div>

                <div class="page4-content">
                    <div class="kpi-grid">
                        <div class="kpi-card"><div class="kpi-label">Ng√¢n S√°ch</div><div class="kpi-value">142.3 T·ª∑</div><div class="kpi-change positive">Hi·ªán t·∫°i</div></div>
                        <div class="kpi-card"><div class="kpi-label">ƒê√£ Chi</div><div class="kpi-value">87.4 T·ª∑</div><div class="kpi-change negative">61.4%</div></div>
                        <div class="kpi-card"><div class="kpi-label">C√≤n L·∫°i</div><div class="kpi-value">54.9 T·ª∑</div><div class="kpi-change positive">38.6%</div></div>
                        <div class="kpi-card"><div class="kpi-label">M·ª©c V∆∞·ª£t K·∫ø Ho·∫°ch</div><div class="kpi-value">12-15%</div><div class="kpi-change negative">Nguy hi·ªÉm</div></div>
                    </div>

                    <div class="chart-grid">
                        <div class="chart-card" style="position: relative;">
                            <div class="chart-title">üéØ T·ªïng ƒê√£ Chi So V·ªõi K·∫ø Ho·∫°ch Chi</div>
                            <div class="chart-container gauge">
                            <canvas
                                id="chart9"
                                width="420"
                                height="260">
                            </canvas>
                        </div>
                        </div>
                        <div class="chart-card"><div class="chart-title">üìä Chi Th·ª±c T·∫ø vs K·∫ø Ho·∫°ch Theo Th√°ng</div><div class="chart-container"><canvas id="chart11c"></canvas></div></div>
                        <div class="chart-card"><div class="chart-title">üìà L≈©y K·∫ø Chi: NƒÉm Nay vs NƒÉm Tr∆∞·ªõc</div><div class="chart-container"><canvas id="chart11d"></canvas></div></div>
                    </div>

                    <div class="chart-grid page3-two page4-two" style="padding: 20px 0;">
                        <div class="stacked-col">
                            <div class="chart-card"><div class="chart-title">üéØ T·ªïng ƒê√£ Chi So V·ªõi K·∫ø Ho·∫°ch Chi</div><div class="chart-container small"><canvas id="chart9_old" width="420" height="150" style="width:100%; height:150px; max-width:0px;"></canvas></div></div>
                            <div class="chart-card"><div class="chart-title">ü•ß Ph√¢n B·ªï Chi Theo Danh M·ª•c</div><div class="chart-container tall"><canvas id="chart10"></canvas></div></div>
                            <div class="chart-card"><div class="chart-title">üìä Th·ª±c T·∫ø vs K·∫ø Ho·∫°ch - C√°c M·ª•c Chi</div><div class="chart-container tall"><canvas id="chart11"></canvas></div></div>
                        </div>
                        <div class="table-col">
                            <div class="chart-card">
                                <div class="chart-title">üìã Chi Ti·∫øt Chi Theo H·∫°ng M·ª•c - 12 Th√°ng</div>
                                <div style="overflow-x: auto; max-height: 650px;">
                                    <table class="matrix-table">
                                        <thead>
                                            <tr>
                                                <th>H·∫°ng M·ª•c Chi</th>
                                                <th>T1</th>
                                                <th>T2</th>
                                                <th>T3</th>
                                                <th>T4</th>
                                                <th>T5</th>
                                                <th>T6</th>
                                                <th>T7</th>
                                                <th>T8</th>
                                                <th>T9</th>
                                                <th>T10</th>
                                                <th>T11</th>
                                                <th>T12</th>
                                                <th>T·ªïng</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr style="background: #fff3cd; font-weight: bold;"><td>CHI.01 - Chi cho ph√°p l√Ω d·ª± √°n</td><td>0.5</td><td>0.5</td><td>0.6</td><td>0.6</td><td>0.5</td><td>0.5</td><td>0.5</td><td>0.6</td><td>0.5</td><td>0.5</td><td>0.6</td><td>0.5</td><td>6.4</td></tr>
                                            <tr style="background: #fff3cd; font-weight: bold;"><td>CHI.02 - Chi cho ki·∫øn thi·∫øt c∆° b·∫£n</td><td>1.1</td><td>1.2</td><td>1.2</td><td>1.3</td><td>1.3</td><td>1.4</td><td>1.4</td><td>1.3</td><td>1.2</td><td>1.2</td><td>1.1</td><td>1.1</td><td>14.8</td></tr>
                                            <tr style="background: #fff3cd; font-weight: bold;"><td>CHI.03 - Chi cho c√¥ng t√°c b√°n h√†ng</td><td>0.8</td><td>0.9</td><td>0.9</td><td>1.0</td><td>0.9</td><td>0.9</td><td>0.9</td><td>0.8</td><td>0.8</td><td>0.8</td><td>0.8</td><td>0.8</td><td>10.3</td></tr>
                                            <tr style="background: #fff3cd; font-weight: bold;"><td>CHI.04 - Chi c√¥ng t√°c chu·∫©n b·ªã</td><td>0.6</td><td>0.6</td><td>0.7</td><td>0.7</td><td>0.7</td><td>0.7</td><td>0.7</td><td>0.7</td><td>0.6</td><td>0.6</td><td>0.6</td><td>0.6</td><td>7.8</td></tr>
                                            <tr style="background: #fff3cd; font-weight: bold;"><td>CHI.05 - Chi c√¥ng t√°c thi·∫øt b·ªã</td><td>0.9</td><td>1.0</td><td>1.0</td><td>1.1</td><td>1.1</td><td>1.1</td><td>1.1</td><td>1.0</td><td>1.0</td><td>0.9</td><td>0.9</td><td>0.9</td><td>12.0</td></tr>
                                            <tr style="background: #fff3cd; font-weight: bold;"><td>CHI.06 - Chi nh√¢n c√¥ng & th·∫ßu ph·ª•</td><td>2.0</td><td>2.1</td><td>2.3</td><td>2.4</td><td>2.5</td><td>2.6</td><td>2.6</td><td>2.5</td><td>2.4</td><td>2.3</td><td>2.2</td><td>2.2</td><td>28.1</td></tr>
                                            <tr><td style="padding-left: 30px;">CHI.06.30.31 - G√≥i th·∫ßu k·∫øt c·∫•u A</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>2.4</td></tr>
                                            <tr><td style="padding-left: 30px;">CHI.06.30.32 - G√≥i th·∫ßu k·∫øt c·∫•u B</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>2.4</td></tr>
                                            <tr><td style="padding-left: 30px;">CHI.06.30.33 - G√≥i th·∫ßu k·∫øt c·∫•u C</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>2.4</td></tr>
                                            <tr><td style="padding-left: 30px;">CHI.06.30.34 - G√≥i th·∫ßu k·∫øt c·∫•u D</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>2.4</td></tr>
                                            <tr><td style="padding-left: 30px;">CHI.06.40.41 - G√≥i th·∫ßu ho√†n thi·ªán A</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>2.4</td></tr>
                                            <tr><td style="padding-left: 30px;">CHI.06.40.06 - G√≥i th·∫ßu A</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>2.4</td></tr>
                                            <tr><td style="padding-left: 30px;">CHI.06.40.07 - G√≥i th·∫ßu B</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>2.4</td></tr>
                                            <tr><td style="padding-left: 30px;">CHI.06.40.08 - G√≥i th·∫ßu C</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>2.4</td></tr>
                                            <tr><td style="padding-left: 30px;">CHI.06.40.15 - G√≥i th·∫ßu D</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>2.4</td></tr>
                                            <tr><td style="padding-left: 30px;">CHI.06.50.13 - G√≥i th·∫ßu E</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>2.4</td></tr>
                                            <tr><td style="padding-left: 30px;">CHI.06.60.01 - G√≥i th·∫ßu F</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>2.4</td></tr>
                                            <tr style="background: #fff3cd; font-weight: bold;"><td>CHI.07 - Chi v·∫≠t t∆∞ & NCC</td><td>1.2</td><td>1.3</td><td>1.3</td><td>1.4</td><td>1.4</td><td>1.5</td><td>1.5</td><td>1.4</td><td>1.4</td><td>1.3</td><td>1.2</td><td>1.1</td><td>16.0</td></tr>
                                            <tr style="background: #fff3cd; font-weight: bold;"><td>CHI.08 - Chi cho ho·∫°t ƒë·ªông tr·ª±c ti·∫øp</td><td>0.7</td><td>0.7</td><td>0.8</td><td>0.8</td><td>0.8</td><td>0.8</td><td>0.8</td><td>0.7</td><td>0.7</td><td>0.6</td><td>0.6</td><td>0.5</td><td>8.5</td></tr>
                                            <tr style="background: var(--primary-light); font-weight: bold;"><td>T·ªîNG CHI</td><td>7.8</td><td>8.3</td><td>8.8</td><td>9.3</td><td>9.2</td><td>9.5</td><td>9.5</td><td>9.0</td><td>8.6</td><td>8.2</td><td>8.0</td><td>7.7</td><td>103.9</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="kpi-grid page4-kpis">
                    <div class="kpi-card"><div class="kpi-label">T·ªïng chi ng√¢n s√°ch</div><div class="kpi-value">390.0 T·ª∑</div><div class="kpi-change positive">K·∫ø ho·∫°ch</div></div>
                    <div class="kpi-card"><div class="kpi-label">T·ªïng th·ª±c chi</div><div class="kpi-value">382.0 T·ª∑</div><div class="kpi-change positive">-2.1%</div></div>
                    <div class="kpi-card"><div class="kpi-label">% v∆∞·ª£t ng√¢n s√°ch</div><div class="kpi-value">-2.1%</div><div class="kpi-change positive">Trong ki·ªÉm so√°t</div></div>
                    <div class="kpi-card"><div class="kpi-label">D·ª± √°n v∆∞·ª£t chi</div><div class="kpi-value">1 d·ª± √°n</div><div class="kpi-change negative">C·∫£nh b√°o</div></div>
                </div>

                <div class="chart-grid single">
                    <div class="chart-card"><div class="chart-title">Xu h∆∞·ªõng chi: Ng√¢n s√°ch vs Th·ª±c chi</div><div class="chart-container"><canvas id="chartP4Trend"></canvas></div></div>
                </div>

                <div class="chart-grid two">
                    <div class="chart-card"><div class="chart-title">Chi ng√¢n s√°ch vs Th·ª±c chi theo d·ª± √°n</div><div class="chart-container"><canvas id="chartP4ByProject"></canvas></div></div>
                    <div class="chart-card"><div class="chart-title">Ch√™nh l·ªách chi theo d·ª± √°n</div><div class="chart-container"><canvas id="chartP4Variance"></canvas></div></div>
                </div>

                <div class="chart-grid single">
                    <div class="chart-card"><div class="chart-title">C∆° c·∫•u chi theo h·∫°ng m·ª•c</div><div class="chart-container"><canvas id="chartP4Structure"></canvas></div></div>
                </div>

                <div class="chart-card">
                    <div class="chart-title">B·∫£ng chi ti·∫øt chi theo d·ª± √°n</div>
                    <div style="overflow-x: auto; max-height: 360px;">
                        <table class="matrix-table">
                            <thead>
                                <tr>
                                    <th>D·ª± √°n</th>
                                    <th>Chi ng√¢n s√°ch</th>
                                    <th>Th·ª±c chi</th>
                                    <th>Ch√™nh l·ªách</th>
                                    <th>R·ªßi ro</th>
                                </tr>
                            </thead>
                            <tbody id="p4DetailBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="page5" class="page active">
                <div class="page-header">
                    <h1 class="page-title">H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng B√°o C√°o</h1>
                    <p class="page-subtitle">T√≥m t·∫Øt √Ω nghƒ©a v√† m·ª•c ƒë√≠ch c·ªßa t·ª´ng trang ƒë·ªÉ ƒë·ªçc nhanh v√† ra quy·∫øt ƒë·ªãnh.</p>
                </div>

                <div class="section-title">√ù nghƒ©a t·ª´ng trang</div>
                <div class="guide-grid">
                    <div class="guide-card">
                        <div class="guide-icon">üìä</div>
                        <div>
                            <div class="guide-title">Trang 1 - T·ªïng Quan</div>
                            <div class="guide-text">·∫¢nh t·ªïng th·ªÉ ng√¢n s√°ch v√† hi·ªáu qu·∫£ thu/chi theo d·ª± √°n. D√πng ƒë·ªÉ n·∫Øm nhanh b·ª©c tranh chung v√† ƒëi·ªÉm l·ªách ch√≠nh.</div>
                            <ul class="guide-list">
                                <li>KPI t·ªïng thu/chi v√† th·ª±c t·∫ø.</li>
                                <li>So s√°nh ng√¢n s√°ch t·ªïng vs chi ti·∫øt.</li>
                                <li>T·ª∑ l·ªá ƒë·∫°t k·∫ø ho·∫°ch theo d·ª± √°n.</li>
                            </ul>
                        </div>
                    </div>
                    <div class="guide-card">
                        <div class="guide-icon">‚úÖ</div>
                        <div>
                            <div class="guide-title">Trang 2 - Duy·ªát Ng√¢n S√°ch</div>
                            <div class="guide-text">So s√°nh Ver 0 v√† Ver Latest, l·ªçc h·∫°ng m·ª•c ƒë·ªÉ xem t√°c ƒë·ªông l√™n t·ªïng thu/chi sau duy·ªát.</div>
                            <ul class="guide-list">
                                <li>Ch√™nh l·ªách thu/chi theo version.</li>
                                <li>B·∫£ng chi ti·∫øt theo h·∫°ng m·ª•c.</li>
                                <li>B·ªô l·ªçc t∆∞∆°ng t√°c ƒë·ªÉ gi·∫£ l·∫≠p duy·ªát.</li>
                            </ul>
                        </div>
                    </div>
                    <div class="guide-card">
                        <div class="guide-icon">üí∞</div>
                        <div>
                            <div class="guide-title">Trang 3 - T·ªïng Thu</div>
                            <div class="guide-text">Ph√¢n t√≠ch doanh thu th·ª±c t·∫ø theo danh m·ª•c, d·ª± √°n v√† xu h∆∞·ªõng th·ªùi gian.</div>
                            <ul class="guide-list">
                                <li>Gauge ƒë·∫°t k·∫ø ho·∫°ch thu.</li>
                                <li>Xu h∆∞·ªõng thu theo th√°ng.</li>
                                <li>Chi ti·∫øt thu theo h·∫°ng m·ª•c.</li>
                            </ul>
                        </div>
                    </div>
                    <div class="guide-card">
                        <div class="guide-icon">üí∏</div>
                        <div>
                            <div class="guide-title">Trang 4 - T·ªïng Chi</div>
                            <div class="guide-text">Ki·ªÉm so√°t chi th·ª±c t·∫ø so v·ªõi ng√¢n s√°ch, ph√°t hi·ªán r·ªßi ro v∆∞·ª£t chi.</div>
                            <ul class="guide-list">
                                <li>Gauge s·ª≠ d·ª•ng ng√¢n s√°ch chi.</li>
                                <li>So s√°nh chi theo d·ª± √°n.</li>
                                <li>Chi ti·∫øt chi theo h·∫°ng m·ª•c.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="section-title">C√°ch ƒë·ªçc nhanh</div>
                <div class="guide-grid">
                    <div class="guide-card">
                        <div class="guide-icon">‚ö°</div>
                        <div>
                            <div class="guide-title">∆Øu ti√™n theo th·ª© t·ª±</div>
                            <div class="guide-text">B·∫Øt ƒë·∫ßu t·ª´ KPI t·ªïng quan, sau ƒë√≥ xem bi·ªÉu ƒë·ªì ch√™nh l·ªách v√† cu·ªëi c√πng l√† b·∫£ng chi ti·∫øt.</div>
                        </div>
                    </div>
                    <div class="guide-card">
                        <div class="guide-icon">üéØ</div>
                        <div>
                            <div class="guide-title">Ra quy·∫øt ƒë·ªãnh nhanh</div>
                            <div class="guide-text">D√πng Trang 2 ƒë·ªÉ th·ª≠ thay ƒë·ªïi h·∫°ng m·ª•c duy·ªát v√† xem ngay t√°c ƒë·ªông l√™n thu/chi.</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        Chart.defaults.font.family = "'Be Vietnam Pro', 'Segoe UI', Tahoma, Arial, sans-serif";

        const chartConfig = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { labels: { font: { size: 10 }, color: '#6B7280', usePointStyle: true }, position: 'bottom' },
                tooltip: { backgroundColor: 'rgba(0,0,0,0.8)', padding: 10, titleFont: { size: 11 }, bodyFont: { size: 10 }, cornerRadius: 6 }
            }
        };

        const colors = {
            primary: '#DC2626',
            secondary: '#EF4444',
            accent: '#F87171',
            light: '#FCA5A5',
            success: '#10B981',
            warning: '#F59E0B',
            info: '#3B82F6',
            gray: '#9CA3AF'
        };

        const lineValueLabelPlugin = {
            id: 'lineValueLabels',
            afterDatasetsDraw(chart, args, pluginOptions) {
                if (!pluginOptions || pluginOptions.enabled !== true) return;
                const { ctx, chartArea } = chart;
                const formatter = pluginOptions.formatter || ((value) => `${value.toFixed(1)}%`);
                const color = pluginOptions.color || '#0F172A';
                const font = pluginOptions.font || "600 10px 'Be Vietnam Pro'";
                const halo = pluginOptions.halo !== false;

                ctx.save();
                ctx.font = font;
                ctx.textAlign = 'center';

                chart.data.datasets.forEach((dataset, datasetIndex) => {
                    if (dataset.type !== 'line') return;
                    const meta = chart.getDatasetMeta(datasetIndex);
                    if (!meta || meta.hidden) return;

                    meta.data.forEach((element, index) => {
                        const rawValue = dataset.data[index];
                        if (!Number.isFinite(rawValue)) return;

                        const label = formatter(rawValue, dataset, index);
                        const x = element.x;
                        let y = element.y - 10;
                        let baseline = 'bottom';

                        if (y < chartArea.top + 8) {
                            y = element.y + 16;
                            baseline = 'top';
                        }

                        ctx.textBaseline = baseline;
                        if (halo) {
                            ctx.lineWidth = 3;
                            ctx.strokeStyle = 'rgba(255, 255, 255, 0.9)';
                            ctx.strokeText(label, x, y);
                        }
                        ctx.fillStyle = color;
                        ctx.fillText(label, x, y);
                    });
                });

                ctx.restore();
            }
        };

        Chart.register(lineValueLabelPlugin);

        const projects = ['DA Alpha', 'DA Beta', 'DA Gamma', 'DA Delta', 'DA Epsilon'];

        const p1RevenueTotal = [120, 110, 105, 135, 95];
        const p1CostTotal = [80, 75, 70, 90, 65];
        const p1RevenueDetail = [...p1RevenueTotal];
        const p1CostDetail = [...p1CostTotal];
        const p1ActualRevenue = [115, 106, 98, 128, 90];
        const p1ActualCost = [78, 70, 66, 89, 60];
        const p1RevenueRatio = p1ActualRevenue.map((v, i) => (v / p1RevenueTotal[i]) * 100);
        const p1CostRatio = p1ActualCost.map((v, i) => (v / p1CostTotal[i]) * 100);

        new Chart(document.getElementById('chartP1Revenue'), {
            type: 'bar',
            data: {
                labels: projects,
                datasets: [
                    { label: 'Ng√¢n s√°ch t·ªïng - Thu', data: p1RevenueTotal, backgroundColor: '#10B981' },
                    { label: 'Ng√¢n s√°ch chi ti·∫øt - Thu', data: p1RevenueDetail, backgroundColor: '#6EE7B7' }
                ]
            },
            options: { ...chartConfig, scales: { y: { beginAtZero: true, ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } }, x: { ticks: { color: colors.gray } } } }
        });

        new Chart(document.getElementById('chartP1Cost'), {
            type: 'bar',
            data: {
                labels: projects,
                datasets: [
                    { label: 'Ng√¢n s√°ch t·ªïng - Chi', data: p1CostTotal, backgroundColor: colors.primary },
                    { label: 'Ng√¢n s√°ch chi ti·∫øt - Chi', data: p1CostDetail, backgroundColor: colors.light }
                ]
            },
            options: { ...chartConfig, scales: { y: { beginAtZero: true, ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } }, x: { ticks: { color: colors.gray } } } }
        });

        new Chart(document.getElementById('chartP1RevenueActual'), {
            data: {
                labels: projects,
                datasets: [
                            {
                                type: 'bar',
                                label: 'Thu th·ª±c t·∫ø (T·ª∑)',
                                data: p1ActualRevenue,
                                backgroundColor: '#10B981',
                                order: 10
                            },
                            {
                                type: 'bar',
                                label: 'Ng√¢n s√°ch t·ªïng - Thu',
                                data: p1RevenueTotal,
                                backgroundColor: '#93C5FD',
                                order: 10
                            },
                            {
                                type: 'line',
                                label: 'T·ª∑ l·ªá ƒë·∫°t (%)',
                                data: p1RevenueRatio,
                                borderColor: '#F59E0B',
                                borderWidth: 3.2,
                                pointRadius: 4,
                                pointHoverRadius: 6,
                                pointBackgroundColor: '#F59E0B',
                                pointBorderColor: '#FFFFFF',
                                pointBorderWidth: 2,
                                tension: 0.35,
                                fill: false,
                                yAxisID: 'yRatio',
                                order: 1   // üëà PH·∫¢I NH·ªé NH·∫§T
                            }
                        ]

            },
            options: {
                ...chartConfig,
                plugins: {
                    ...chartConfig.plugins,
                    lineValueLabels: {
                        enabled: true,
                        color: '#F59E0B',
                        formatter: (value) => `${value.toFixed(1)}%`
                    }
                },
                scales: {
                    y: { beginAtZero: true, ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } },
                    yRatio: {
                        position: 'right',
                            min: 0,          // üëà B·∫ÆT BU·ªòC
                            max: 100,        // üëà B·∫ÆT BU·ªòC
                        ticks: { color: colors.gray, callback: (value) => value + '%' },
                        grid: { drawOnChartArea: false },
                        suggestedMax: 130
                    },
                    x: { ticks: { color: colors.gray } }
                }
            }
        });

        new Chart(document.getElementById('chartP1CostActual'), {
            data: {
                labels: projects,
                datasets: [
            {
                type: 'bar',
                label: 'Chi th·ª±c t·∫ø (T·ª∑)',
                data: p1ActualCost,
                backgroundColor: colors.primary,
                order: 10
            },
            {
                type: 'bar',
                label: 'Ng√¢n s√°ch t·ªïng - Chi',
                data: p1CostTotal,
                backgroundColor: colors.light,
                order: 10
            },
            {
                type: 'line',
                label: 'T·ª∑ l·ªá s·ª≠ d·ª•ng (%)',
                data: p1CostRatio,
                borderColor: '#F59E0B',
                borderWidth: 3.2,
                pointRadius: 4,
                pointHoverRadius: 6,
                pointBackgroundColor: '#F59E0B',
                pointBorderColor: '#FFFFFF',
                pointBorderWidth: 2,
                tension: 0.35,
                fill: false,
                yAxisID: 'yRatio',
                order: 1   // üëà LINE V·∫º SAU ‚Üí N·∫∞M TR√äN
            }        
            ]
            },
            options: {
                ...chartConfig,
                plugins: {
                    ...chartConfig.plugins,
                    lineValueLabels: {
                        enabled: true,
                        color: '#F59E0B',
                        formatter: (value) => `${value.toFixed(1)}%`
                    }
                },
                scales: {
                    y: { beginAtZero: true, ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } },
                    yRatio: {
                        position: 'right',
                            min: 0,          // üëà B·∫ÆT BU·ªòC
                            max: 100,        // üëà B·∫ÆT BU·ªòC
                        ticks: { color: colors.gray, callback: (value) => value + '%' },
                        grid: { drawOnChartArea: false },
                        suggestedMax: 130
                    },
                    x: { ticks: { color: colors.gray } }
                }
            }
        });

        const budgetCompare = {
            total: {
                revenue: { ver0: 520, latest: 560 },
                cost: { ver0: 360, latest: 390 },
                approvalVersion: 'Ver Latest',
                table: [

                    { item: 'THU.01 - Thu t·ª´ Ch·ªß ƒê·∫ßu T∆∞', ver0: 250, latest: 270, version: 'V1' },
                    { item: 'THU.02 - Thu Ho·∫°t ƒê·ªông T√†i Ch√≠nh', ver0: 120, latest: 130, version: 'V1' },
                    { item: 'THU.03 - Thu t·ª´ Ngu·ªìn Kh√°c', ver0: 90, latest: 95, version: 'V2' },
                    { item: 'THU.04 - Thu Kh√°c', ver0: 60, latest: 65, version: 'V2' },
                    { item: 'CHI.01 - Chi cho ph√°p l√Ω d·ª± √°n', ver0: 35, latest: 40, version: 'V1' },
                    { item: 'CHI.02 - Chi cho ki·∫øn thi·∫øt c∆° b·∫£n', ver0: 110, latest: 120, version: 'V2' },
                    { item: 'CHI.03 - Chi cho c√¥ng t√°c b√°n h√†ng', ver0: 55, latest: 60, version: 'V2' },
                    { item: 'CHI.04 - Chi c√¥ng t√°c chu·∫©n b·ªã', ver0: 40, latest: 44, version: 'V2' },
                    { item: 'CHI.05 - Chi c√¥ng t√°c thi·∫øt b·ªã', ver0: 45, latest: 50, version: 'V2' },
                    { item: 'CHI.06 - Chi nh√¢n c√¥ng & th·∫ßu ph·ª•', ver0: 50, latest: 55, version: 'V3' },
                    { item: 'CHI.07 - Chi v·∫≠t t∆∞ & NCC', ver0: 15, latest: 16, version: 'V3' },
                    { item: 'CHI.08 - Chi cho ho·∫°t ƒë·ªông tr·ª±c ti·∫øp', ver0: 10, latest: 5, version: 'V3' }
                ],
                approval: { revenue: 575, cost: 405, net: 170, fhi: 2.15 }
            },
            detail: {
                revenue: { ver0: 510, latest: 538 },
                cost: { ver0: 350, latest: 375 },
                approvalVersion: 'Ver Latest',
                table: [

                    { item: 'THU.01.01 - T∆∞ v·∫•n', ver0: 95, latest: 102, version: 'V1' },
                    { item: 'THU.01.02 - Rao s·ª±', ver0: 70, latest: 75, version: 'V1' },
                    { item: 'THU.01.03 - B·∫£n quy·ªÅn & Kh√°c', ver0: 60, latest: 64, version: 'V1' },
                    { item: 'THU.02.01 - L√£i su·∫•t ng√¢n h√†ng', ver0: 55, latest: 58, version: 'V2' },
                    { item: 'THU.02.02 - C·ªï t·ª©c & Kh√°c', ver0: 45, latest: 47, version: 'V2' },
                    { item: 'THU.03.01 - B·∫£o t√≠n v·ªá th·∫≥ng', ver0: 35, latest: 38, version: 'V2' },
                    { item: 'THU.03.02 - Kh√°c', ver0: 25, latest: 27, version: 'V2' },
                    { item: 'THU.04.01 - Doanh thu kh√°c 1', ver0: 20, latest: 22, version: 'V2' },
                    { item: 'THU.04.02 - Doanh thu kh√°c 2', ver0: 20, latest: 22, version: 'V2' },
                    { item: 'CHI.01.10 - H·ªì s∆° ph√°p l√Ω d·ª± √°n', ver0: 6.0, latest: 6.5, version: 'V1' },
                    { item: 'CHI.01.20 - Ph√≠ gi·∫•y ph√©p x√¢y d·ª±ng', ver0: 5.5, latest: 6.0, version: 'V1' },
                    { item: 'CHI.01.30 - T∆∞ v·∫•n ph√°p l√Ω & h·ª£p ƒë·ªìng', ver0: 4.8, latest: 5.2, version: 'V1' },
                    { item: 'CHI.01.40 - L·ªá ph√≠ th·∫©m ƒë·ªãnh', ver0: 6.0, latest: 6.4, version: 'V1' },
                    { item: 'CHI.02.10 - Kh·∫£o s√°t ƒë·ªãa h√¨nh', ver0: 8.5, latest: 9.2, version: 'V2' },
                    { item: 'CHI.02.20 - Thi·∫øt k·∫ø c∆° s·ªü', ver0: 9.0, latest: 9.7, version: 'V2' },
                    { item: 'CHI.02.30 - Thi·∫øt k·∫ø k·ªπ thu·∫≠t', ver0: 7.5, latest: 8.1, version: 'V2' },
                    { item: 'CHI.02.40 - Th·∫©m tra thi·∫øt k·∫ø', ver0: 8.0, latest: 8.6, version: 'V2' },
                    { item: 'CHI.03.10 - Marketing & truy·ªÅn th√¥ng', ver0: 5.5, latest: 6.0, version: 'V2' },
                    { item: 'CHI.03.20 - S√†n giao d·ªãch & m√¥i gi·ªõi', ver0: 6.2, latest: 6.8, version: 'V2' },
                    { item: 'CHI.03.30 - ChƒÉm s√≥c kh√°ch h√†ng', ver0: 4.2, latest: 4.6, version: 'V2' },
                    { item: 'CHI.03.40 - Chi ph√≠ s·ª± ki·ªán b√°n h√†ng', ver0: 5.0, latest: 5.4, version: 'V2' },
                    { item: 'CHI.04.00 - Chi ph√≠ b·∫£o l√£nh, b·∫£o hi·ªÉm', ver0: 4.5, latest: 5.0, version: 'V2' },
                    { item: 'CHI.04.20 - An to√†n lao ƒë·ªông & VSMT', ver0: 4.0, latest: 4.4, version: 'V2' },
                    { item: 'CHI.04.30 - An ninh cho c√¥ng tr∆∞·ªùng', ver0: 4.6, latest: 5.1, version: 'V2' },
                    { item: 'CHI.04.40 - Tr·∫Øc ƒë·∫°c c√¥ng tr√¨nh', ver0: 5.2, latest: 5.6, version: 'V2' },
                    { item: 'CHI.05.10 - Thi·∫øt b·ªã thi c√¥ng ch√≠nh', ver0: 6.8, latest: 7.4, version: 'V3' },
                    { item: 'CHI.05.20 - Thi·∫øt b·ªã ph·ª• tr·ª£', ver0: 5.5, latest: 6.0, version: 'V3' },
                    { item: 'CHI.05.30 - L·∫Øp ƒë·∫∑t & hi·ªáu ch·ªânh', ver0: 6.2, latest: 6.8, version: 'V3' },
                    { item: 'CHI.05.40 - B·∫£o tr√¨ thi·∫øt b·ªã', ver0: 4.8, latest: 5.2, version: 'V3' },
                    { item: 'CHI.06.10 - Nh√¢n c√¥ng tr·ª±c ti·∫øp', ver0: 9.0, latest: 9.6, version: 'V3' },
                    { item: 'CHI.06.20 - Th·∫ßu ph·ª• k·∫øt c·∫•u', ver0: 8.4, latest: 9.0, version: 'V3' },
                    { item: 'CHI.06.30 - Th·∫ßu ph·ª• ho√†n thi·ªán', ver0: 8.8, latest: 9.4, version: 'V3' },
                    { item: 'CHI.06.40 - An to√†n & b·∫£o h·ªô lao ƒë·ªông', ver0: 5.2, latest: 5.7, version: 'V3' },
                    { item: 'CHI.07.10 - V·∫≠t t∆∞ ch√≠nh', ver0: 4.5, latest: 4.9, version: 'V3' },
                    { item: 'CHI.07.20 - V·∫≠t t∆∞ ph·ª•', ver0: 3.8, latest: 4.1, version: 'V3' },
                    { item: 'CHI.07.30 - V·∫≠n chuy·ªÉn & b·ªëc d·ª°', ver0: 4.2, latest: 4.6, version: 'V3' },
                    { item: 'CHI.07.40 - Nh√† cung c·∫•p chi·∫øn l∆∞·ª£c', ver0: 4.0, latest: 4.3, version: 'V3' },
                    { item: 'CHI.08.10 - V·∫≠n h√†nh c√¥ng tr∆∞·ªùng', ver0: 3.6, latest: 3.9, version: 'V3' },
                    { item: 'CHI.08.20 - Nhi√™n li·ªáu & nƒÉng l∆∞·ª£ng', ver0: 3.2, latest: 3.5, version: 'V3' },
                    { item: 'CHI.08.30 - B·∫£o v·ªá & an ninh', ver0: 2.8, latest: 3.0, version: 'V3' },
                    { item: 'CHI.08.40 - H·∫≠u c·∫ßn hi·ªán tr∆∞·ªùng', ver0: 3.4, latest: 3.7, version: 'V3' }
                ],
                approval: { revenue: 548, cost: 382, net: 166, fhi: 2.05 }
            }
        };

        const page2ProjectCompare = {
            total: {
                revenue: { ver0: [115, 106, 98, 128, 90], latest: [120, 110, 105, 135, 95] },
                cost: { ver0: [72, 68, 64, 84, 60], latest: [80, 75, 70, 90, 65] }
            },
            detail: {
                revenue: { ver0: [112, 104, 96, 125, 88], latest: [118, 108, 102, 130, 92] },
                cost: { ver0: [70, 66, 62, 82, 58], latest: [78, 72, 68, 88, 63] }
            }
        };

        const p2RevenueChart = new Chart(document.getElementById('chartP2Revenue'), {
            type: 'bar',
            data: {
                labels: projects,
                datasets: [
                    { label: 'Ver 0', data: [], backgroundColor: '#9AE6B4' },
                    { label: 'Ver Latest', data: [], backgroundColor: '#10B981' }
                ]
            },
            options: { ...chartConfig, scales: { y: { beginAtZero: true, ticks: { color: colors.gray } }, x: { ticks: { color: colors.gray } } } }
        });

        const p2CostChart = new Chart(document.getElementById('chartP2Cost'), {
            type: 'bar',
            data: {
                labels: projects,
                datasets: [
                    { label: 'Ver 0', data: [], backgroundColor: '#FCA5A5' },
                    { label: 'Ver Latest', data: [], backgroundColor: '#DC2626' }
                ]
            },
            options: { ...chartConfig, scales: { y: { beginAtZero: true, ticks: { color: colors.gray } }, x: { ticks: { color: colors.gray } } } }
        });

        function formatDelta(value) {
            const sign = value >= 0 ? '+' : '';
            return sign + value.toFixed(1) + ' T·ª∑';
        }

        function setDelta(el, delta, suffix, decimals) {
            const value = Number.isFinite(delta) ? delta : 0;
            const sign = value >= 0 ? '+' : '';
            const fixed = value.toFixed(decimals);
            el.textContent = `Œî ${sign}${fixed}${suffix}`;
            el.className = `kpi-sub kpi-delta ${value >= 0 ? 'positive' : 'negative'}`;
        }

        function buildApprovalCatalog() {
            const catalog = {};
            ['total', 'detail'].forEach((mode) => {
                budgetCompare[mode].table.forEach((row) => {
                    const code = row.item.split(' - ')[0].trim();
                    catalog[code] = {
                        ver0: row.ver0,
                        latest: row.latest,
                        type: code.startsWith('THU') ? 'thu' : 'chi'
                    };
                });
            });
            return catalog;
        }

        const approvalCatalog = buildApprovalCatalog();
        let currentPage2Mode = 'total';

        function getSelectedApprovalCodes() {
            const inputs = Array.from(document.querySelectorAll('input[data-role="approval-item"]:checked'));
            const codes = inputs.map((input) => input.dataset.code).filter(Boolean);
            const childParents = new Set();

            codes.forEach((code) => {
                const parts = code.split('.');
                if (parts.length > 2) {
                    childParents.add(parts.slice(0, 2).join('.'));
                }
            });

            return codes.filter((code) => {
                const parts = code.split('.');
                return !(parts.length === 2 && childParents.has(code));
            });
        }

        function getProjectScale() {
            const projects = Array.from(document.querySelectorAll('input[data-role="project"]'));
            if (!projects.length) return 1;
            const selected = projects.filter((input) => input.checked).length;
            if (selected === 0) return 0;
            return selected / projects.length;
        }

        function computeApprovalDelta(codes, scale) {
            const multiplier = Number.isFinite(scale) ? scale : 1;
            return codes.reduce((acc, code) => {
                const item = approvalCatalog[code];
                if (!item) return acc;
                const delta = (item.latest - item.ver0) * 0.4 * multiplier;
                if (item.type === 'thu') {
                    acc.revenue += delta;
                } else {
                    acc.cost += delta;
                }
                return acc;
            }, { revenue: 0, cost: 0 });
        }

        function updateMultiSelectLabel(container) {
            const inputs = Array.from(container.querySelectorAll('input[type="checkbox"]'));
            const countEl = container.querySelector('.multi-select-count');
            if (!countEl) return;
            const total = inputs.length;
            const checked = inputs.filter((input) => input.checked).length;

            if (checked === 0) {
                countEl.textContent = 'Ch∆∞a ch·ªçn';
            } else if (checked === total) {
                countEl.textContent = `T·∫•t c·∫£ (${total})`;
            } else {
                countEl.textContent = `${checked} ƒë√£ ch·ªçn`;
            }
        }

        function updateApprovalSummary() {
            const data = budgetCompare[currentPage2Mode];
            if (!data) return;

            const beforeRevenue = data.revenue.latest;
            const beforeCost = data.cost.latest;
            const beforeNet = beforeRevenue - beforeCost;
            const fhiRatio = data.approval.revenue ? (beforeRevenue / data.approval.revenue) : 1;
            const beforeFhi = data.approval.fhi * fhiRatio;

            const selectedCodes = getSelectedApprovalCodes();
            const projectScale = getProjectScale();
            const deltas = computeApprovalDelta(selectedCodes, projectScale);
            const afterRevenue = beforeRevenue + deltas.revenue;
            const afterCost = beforeCost + deltas.cost;
            const afterNet = afterRevenue - afterCost;
            const afterFhi = beforeRevenue ? (beforeFhi * (afterRevenue / beforeRevenue)) : beforeFhi;

            document.getElementById('p2AfterRevenue').textContent = afterRevenue.toFixed(1) + ' T·ª∑';
            document.getElementById('p2AfterCost').textContent = afterCost.toFixed(1) + ' T·ª∑';
            document.getElementById('p2AfterNet').textContent = afterNet.toFixed(1) + ' T·ª∑';
            document.getElementById('p2AfterFhi').textContent = afterFhi.toFixed(2);

            document.getElementById('p2BeforeRevenue').textContent = beforeRevenue.toFixed(1) + ' T·ª∑';
            document.getElementById('p2BeforeCost').textContent = beforeCost.toFixed(1) + ' T·ª∑';
            document.getElementById('p2BeforeNet').textContent = beforeNet.toFixed(1) + ' T·ª∑';
            document.getElementById('p2BeforeFhi').textContent = beforeFhi.toFixed(2);

            setDelta(document.getElementById('p2DeltaRevenue'), afterRevenue - beforeRevenue, ' T·ª∑', 1);
            setDelta(document.getElementById('p2DeltaCost'), afterCost - beforeCost, ' T·ª∑', 1);
            setDelta(document.getElementById('p2DeltaNet'), afterNet - beforeNet, ' T·ª∑', 1);
            setDelta(document.getElementById('p2DeltaFhi'), afterFhi - beforeFhi, '', 2);
        }

        function initPage2Filters() {
            const containers = document.querySelectorAll('.multi-select');
            if (!containers.length) return;

            const approvalInputs = Array.from(document.querySelectorAll('input[data-role="approval-item"]'));
            const parentInputs = approvalInputs.filter((input) => input.dataset.level === '1');
            const childInputs = approvalInputs.filter((input) => input.dataset.level === '2');
            const parentMap = new Map();
            const childrenMap = new Map();

            parentInputs.forEach((input) => {
                parentMap.set(input.dataset.code, input);
            });

            childInputs.forEach((input) => {
                const parentCode = input.dataset.code.split('.').slice(0, 2).join('.');
                if (!childrenMap.has(parentCode)) {
                    childrenMap.set(parentCode, []);
                }
                childrenMap.get(parentCode).push(input);
            });

            function syncParentState(parentCode) {
                const parentInput = parentMap.get(parentCode);
                const children = childrenMap.get(parentCode) || [];
                if (!parentInput || !children.length) return;
                const checkedCount = children.filter((child) => child.checked).length;
                parentInput.indeterminate = checkedCount > 0 && checkedCount < children.length;
                parentInput.checked = checkedCount === children.length;
            }

            function updateAllLabels() {
                containers.forEach(updateMultiSelectLabel);
            }

            containers.forEach((container) => {
                const trigger = container.querySelector('.multi-select-trigger');
                if (trigger) {
                    trigger.addEventListener('click', () => {
                        container.classList.toggle('open');
                    });
                }
            });

            document.querySelectorAll('.multi-select input[type="checkbox"]').forEach((input) => {
                input.addEventListener('change', () => {
                    if (input.dataset.role === 'approval-item') {
                        if (input.dataset.level === '1') {
                            const children = childrenMap.get(input.dataset.code) || [];
                            children.forEach((child) => {
                                child.checked = input.checked;
                                child.indeterminate = false;
                            });
                        } else if (input.dataset.level === '2') {
                            const parentCode = input.dataset.code.split('.').slice(0, 2).join('.');
                            syncParentState(parentCode);
                        }
                    }

                    updateAllLabels();
                    updateApprovalSummary();
                });
            });

            parentMap.forEach((_, parentCode) => syncParentState(parentCode));
            updateAllLabels();

            document.addEventListener('click', (event) => {
                containers.forEach((container) => {
                    if (!container.contains(event.target)) {
                        container.classList.remove('open');
                    }
                });
            });
        }

        function renderPage2(mode) {
            currentPage2Mode = mode;
            const data = budgetCompare[mode];
            const revDelta = data.revenue.latest - data.revenue.ver0;
            const revPct = (revDelta / data.revenue.ver0) * 100;
            const costDelta = data.cost.latest - data.cost.ver0;
            const costPct = (costDelta / data.cost.ver0) * 100;

            document.getElementById('p2RevenueVer0').textContent = data.revenue.ver0.toFixed(1) + ' T·ª∑';
            document.getElementById('p2RevenueLatest').textContent = data.revenue.latest.toFixed(1) + ' T·ª∑';
            document.getElementById('p2RevenueDelta').textContent = formatDelta(revDelta);
            document.getElementById('p2RevenueDeltaPct').textContent = (revPct >= 0 ? '+' : '') + revPct.toFixed(1) + '%';

            document.getElementById('p2CostVer0').textContent = data.cost.ver0.toFixed(1) + ' T·ª∑';
            document.getElementById('p2CostLatest').textContent = data.cost.latest.toFixed(1) + ' T·ª∑';
            document.getElementById('p2CostDelta').textContent = formatDelta(costDelta);
            document.getElementById('p2CostDeltaPct').textContent = (costPct >= 0 ? '+' : '') + costPct.toFixed(1) + '%';

            const projectCompare = page2ProjectCompare[mode];
            p2RevenueChart.data.datasets[0].data = projectCompare.revenue.ver0;
            p2RevenueChart.data.datasets[1].data = projectCompare.revenue.latest;
            p2CostChart.data.datasets[0].data = projectCompare.cost.ver0;
            p2CostChart.data.datasets[1].data = projectCompare.cost.latest;
            p2RevenueChart.update();
            p2CostChart.update();

            const body = document.getElementById('p2DetailBody');
            const thuRows = data.table.filter(row => row.item.startsWith('THU.'));
            const chiRows = data.table.filter(row => row.item.startsWith('CHI.'));
            const rows = [];

            rows.push('<tr class="row-group row-group-thu"><td colspan="6">THU</td></tr>');
            thuRows.forEach(row => {
                const delta = row.latest - row.ver0;
                const pct = (delta / row.ver0) * 100;
                const adjust = Number.isFinite(row.adjust) ? row.adjust : (row.latest + delta * 0.4);
                rows.push(`<tr class="row-child"><td>${row.item}</td><td>${row.ver0.toFixed(1)}</td><td>${row.latest.toFixed(1)}</td><td>${delta.toFixed(1)}</td><td>${pct.toFixed(1)}%</td><td>${adjust.toFixed(1)}</td></tr>`);
            });

            rows.push('<tr class="row-group row-group-chi"><td colspan="6">CHI</td></tr>');
            chiRows.forEach(row => {
                const delta = row.latest - row.ver0;
                const pct = (delta / row.ver0) * 100;
                const adjust = Number.isFinite(row.adjust) ? row.adjust : (row.latest + delta * 0.4);
                rows.push(`<tr class="row-child"><td>${row.item}</td><td>${row.ver0.toFixed(1)}</td><td>${row.latest.toFixed(1)}</td><td>${delta.toFixed(1)}</td><td>${pct.toFixed(1)}%</td><td>${adjust.toFixed(1)}</td></tr>`);
            });

            body.innerHTML = rows.join('');
            updateApprovalSummary();
        }
        
        // PAGE 3 CHARTS - THU TH·ª∞C T·∫æ
        (function() {
            const canvas = document.getElementById('chart6');
            const ctx = canvas.getContext('2d');
            const actualValue = 10.4;
            const targetValue = 12.0;
            const percentageValue = Math.round((actualValue / targetValue) * 100);
            const maxValue = 100;

            function drawGauge() {
                const w = canvas.width;
                const h = canvas.height;
                const cx = w / 2;
                const cy = h * 0.65;
                const radius = Math.min(w * 0.35, h * 0.55);

                ctx.clearRect(0, 0, w, h);
                ctx.lineCap = 'round';

                const bands = [ { pct: 60, color: '#DC2626' }, { pct: 85, color: '#F59E0B' }, { pct: 100, color: '#10B981' } ];
                let startPct = 0;
                bands.forEach(b => {
                    const startAngle = Math.PI + Math.PI * (startPct / maxValue);
                    const endAngle = Math.PI + Math.PI * (b.pct / maxValue);
                    ctx.beginPath();
                    ctx.arc(cx, cy, radius, startAngle, endAngle, false);
                    ctx.strokeStyle = b.color;
                    ctx.lineWidth = Math.max(18, radius * 0.12);
                    ctx.stroke();
                    startPct = b.pct;
                });

                ctx.beginPath();
                ctx.arc(cx, cy, radius + 12, Math.PI, 0, false);
                ctx.strokeStyle = '#E5E7EB';
                ctx.lineWidth = 1;
                ctx.stroke();

                const angle = Math.PI + Math.PI * (percentageValue / maxValue);
                const nx = cx + Math.cos(angle) * (radius - 8);
                const ny = cy + Math.sin(angle) * (radius - 8);
                ctx.beginPath();
                ctx.moveTo(cx, cy);
                ctx.lineTo(nx, ny);
                ctx.strokeStyle = '#111827';
                ctx.lineWidth = 3;
                ctx.stroke();

                ctx.beginPath();
                ctx.arc(cx, cy, Math.max(7, radius * 0.08), 0, 2 * Math.PI);
                ctx.fillStyle = '#111827';
                ctx.fill();

                ctx.beginPath();
                ctx.arc(cx, cy, Math.max(5, radius * 0.06), 0, 2 * Math.PI);
                ctx.fillStyle = 'white';
                ctx.fill();

                ctx.font = "bold 28px 'Be Vietnam Pro'";
                ctx.fillStyle = percentageValue <= 60 ? '#DC2626' : (percentageValue <= 85 ? '#F59E0B' : '#10B981');
                ctx.textAlign = 'center';
                ctx.fillText(percentageValue + '%', cx, cy + radius * 0.35);

                ctx.font = "bold 13px 'Be Vietnam Pro'";
                ctx.fillStyle = '#111827';
                ctx.textAlign = 'center';
                ctx.fillText('Th·ª±c t·∫ø: ' + actualValue.toFixed(1) + ' T·ª∑', cx, cy + radius * 0.55);

                ctx.font = "11px 'Be Vietnam Pro'";
                ctx.fillStyle = '#6B7280';
                ctx.textAlign = 'center';
                ctx.fillText('K·∫ø ho·∫°ch: ' + targetValue.toFixed(1) + ' T·ª∑', cx, cy + radius * 0.72);
            }

            drawGauge();
            window.addEventListener('resize', drawGauge);
        })();

        new Chart(document.getElementById('chart7'), {
            type: 'line',
            data: {
                labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
                datasets: [
                    { label: 'K·∫ø Ho·∫°ch (T·ª∑)', data: [12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0, 12.0], borderColor: colors.success, borderWidth: 2, borderDash: [5, 5], pointRadius: 3 },
                    { label: 'Th·ª±c T·∫ø (T·ª∑)', data: [10.4, 10.8, 11.1, 11.6, 12.0, 12.5, 12.8, 13.2, 13.7, 14.1, 14.6, 15.0], borderColor: colors.primary, backgroundColor: 'rgba(220,38,38,0.1)', tension: 0.4, fill: true, borderWidth: 2.5, pointRadius: 3 }
                ]
            },
            options: { ...chartConfig, scales: { y: { beginAtZero: true, ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } }, x: { ticks: { color: colors.gray } } } }
        });

        new Chart(document.getElementById('chart8'), {
            type: 'bar',
            data: {
                labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
                datasets: [
                    { label: 'NƒÉm Nay (T·ª∑)', data: [10.4, 10.8, 11.1, 11.6, 12.0, 12.5, 12.8, 13.2, 13.7, 14.1, 14.6, 15.0], backgroundColor: colors.primary },
                    { label: 'NƒÉm Ngo√°i (T·ª∑)', data: [9.6, 10.0, 10.2, 10.6, 10.9, 11.4, 11.7, 12.1, 12.5, 12.8, 13.1, 13.5], backgroundColor: colors.light }
                ]
            },
            options: { ...chartConfig, scales: { y: { beginAtZero: true, ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } }, x: { ticks: { color: colors.gray, fontSize: 9 } } } }
        });

        new Chart(document.getElementById('chart8b'), {
            type: 'doughnut',
            data: {
                labels: ['T∆∞ v·∫•n (32.5%)', 'Rao s·ª± (25.3%)', 'B·∫£n quy·ªÅn & Kh√°c (14.9%)'],
                datasets: [
                    { data: [47.0, 36.6, 21.6], backgroundColor: ['#FCD34D', '#60A5FA', '#F472B6'] }
                ]
            },
            options: chartConfig
        });

        new Chart(document.getElementById('chart8c'), {
            type: 'bar',
            data: {
                labels: ['THU.01', 'THU.02', 'THU.03', 'THU.04'],
                datasets: [
                    { label: 'K·∫ø Ho·∫°ch (T·ª∑)', data: [100.0, 18.0, 14.0, 6.0], backgroundColor: colors.success },
                    { label: 'Th·ª±c T·∫ø (T·ª∑)', data: [105.2, 21.6, 16.5, 7.3], backgroundColor: colors.primary }
                ]
            },
            options: { ...chartConfig, indexAxis: 'y', scales: { x: { beginAtZero: true, ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } }, y: { ticks: { color: colors.gray } } } }
        });

        // PAGE 4 CHARTS - CHI TH·ª∞C T·∫æ
        (function(){
            const canvas = document.getElementById('chart9');
            const ctx = canvas.getContext('2d');
            const actualValue = 87.4;
            const budgetValue = 142.3;
            const percentageValue = Math.round((actualValue / budgetValue) * 100);
            const maxValue = 100;

            function drawGauge4(){
                const parent = canvas.parentElement;
                if (parent) {
                    const width = parent.clientWidth;
                    const height = parent.clientHeight;
                    if (width > 0 && height > 0) {
                        canvas.width = width;
                        canvas.height = height;
                    }
                }
                const w = canvas.width;
                const h = canvas.height;

                const cx = w / 2;

                // 1) Ch·ª´a v√πng label ·ªü ƒë√°y (t√πy ch·ªânh ƒë∆∞·ª£c)
                const labelArea = Math.max(60, Math.round(h * 0.28)); // ~28% chi·ªÅu cao ho·∫∑c t·ªëi thi·ªÉu 60px

                // 2) V√πng d√†nh cho v√≤ng gauge
                const gaugeAreaH = h - labelArea;

                // 3) ƒê·∫∑t t√¢m gauge trong v√πng gauge (kh√¥ng ƒÉn v√†o label)
                const cy = gaugeAreaH * 0.78;

                // 4) TƒÉng radius nh∆∞ng b·ªã gi·ªõi h·∫°n trong gaugeAreaH ƒë·ªÉ kh√¥ng ƒë√®/m·∫•t label
                const radius = Math.min(w * 0.42, gaugeAreaH * 0.72);
                ctx.clearRect(0, 0, w, h);
                ctx.lineCap = 'round';
                const bands = [ {pct: 50, color: '#10B981'}, {pct: 80, color: '#F59E0B'}, {pct: 100, color: '#DC2626'} ];
                let sp = 0;
                bands.forEach(b => {
                    const sa = Math.PI + Math.PI * (sp / maxValue);
                    const ea = Math.PI + Math.PI * (b.pct / maxValue);
                    ctx.beginPath();
                    ctx.arc(cx, cy, radius, sa, ea, false);
                    ctx.strokeStyle = b.color;
                    ctx.lineWidth = Math.max(18, radius * 0.12);
                    ctx.stroke();
                    sp = b.pct;
                });

                ctx.beginPath();
                ctx.arc(cx, cy, radius + 12, Math.PI, 0, false);
                ctx.strokeStyle = '#E5E7EB';
                ctx.lineWidth = 1;
                ctx.stroke();

                const ang = Math.PI + Math.PI * (percentageValue / maxValue);
                const nx = cx + Math.cos(ang) * (radius - 8);
                const ny = cy + Math.sin(ang) * (radius - 8);
                ctx.beginPath();
                ctx.moveTo(cx, cy);
                ctx.lineTo(nx, ny);
                ctx.strokeStyle = '#111827';
                ctx.lineWidth = 3;
                ctx.stroke();

                ctx.beginPath();
                ctx.arc(cx, cy, Math.max(7, radius * 0.08), 0, 2 * Math.PI);
                ctx.fillStyle = '#111827';
                ctx.fill();
                ctx.beginPath();
                ctx.arc(cx, cy, Math.max(5, radius * 0.06), 0, 2 * Math.PI);
                ctx.fillStyle = 'white';
                ctx.fill();

                ctx.font = "bold 28px 'Be Vietnam Pro'";
                ctx.fillStyle = percentageValue <= 50 ? '#10B981' : (percentageValue <= 80 ? '#F59E0B' : '#DC2626');
                ctx.textAlign = 'center';
                ctx.fillText(percentageValue + '%', cx, cy + radius * 0.35);

                ctx.font = "bold 13px 'Be Vietnam Pro'";
                ctx.fillStyle = '#111827';
                ctx.textAlign = 'center';
                ctx.fillText('ƒê√£ chi: ' + actualValue.toFixed(1) + ' T·ª∑', cx, cy + radius * 0.55);

                ctx.font = "11px 'Be Vietnam Pro'";
                ctx.fillStyle = '#6B7280';
                ctx.textAlign = 'center';
                ctx.fillText('K·∫ø ho·∫°ch chi: ' + budgetValue.toFixed(1) + ' T·ª∑', cx, cy + radius * 0.72);
            }
            drawGauge4();
            window.addEventListener('resize', drawGauge4);
        })();

        new Chart(document.getElementById('chart10'), {
            type: 'doughnut',
            data: {
                labels: ['CHI.01 Ph√°p l√Ω', 'CHI.02 Ki·∫øn thi·∫øt', 'CHI.03 B√°n h√†ng', 'CHI.04 Chu·∫©n b·ªã', 'CHI.05 Thi·∫øt b·ªã', 'CHI.06 Nh√¢n c√¥ng & th·∫ßu ph·ª•', 'CHI.07 V·∫≠t t∆∞ & NCC', 'CHI.08 Ho·∫°t ƒë·ªông tr·ª±c ti·∫øp'],
                datasets: [{ data: [6.2, 14.2, 9.9, 7.5, 11.6, 27.0, 15.4, 8.2], backgroundColor: [colors.primary, colors.secondary, colors.accent, colors.warning, colors.success, '#FCD34D', '#60A5FA', '#9CA3AF'] }]
            },
            options: chartConfig
        });

        new Chart(document.getElementById('chart11'), {
            type: 'bar',
            data: {
                labels: ['CHI.01', 'CHI.02', 'CHI.03', 'CHI.04', 'CHI.05', 'CHI.06', 'CHI.07', 'CHI.08'],
                datasets: [
                    { label: 'K·∫ø ho·∫°ch (T·ª∑)', data: [6.8, 14.0, 11.0, 8.2, 11.5, 29.5, 15.5, 9.0], backgroundColor: colors.success },
                    { label: 'Th·ª±c t·∫ø (T·ª∑)', data: [6.4, 14.8, 10.3, 7.8, 12.0, 28.1, 16.0, 8.5], backgroundColor: colors.primary }
                ]
            },
            options: { ...chartConfig, indexAxis: 'y', scales: { x: { beginAtZero: true, ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } }, y: { ticks: { color: colors.gray } } } }
        });

        new Chart(document.getElementById('chart11c'), {
            type: 'bar',
            data: {
                labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
                datasets: [
                    { label: 'K·∫ø ho·∫°ch (T·ª∑)', data: [8.0, 8.5, 8.8, 9.0, 9.2, 9.4, 9.6, 9.8, 9.7, 9.5, 9.3, 9.0], backgroundColor: colors.success },
                    { label: 'Th·ª±c t·∫ø (T·ª∑)', data: [7.4, 8.2, 8.9, 9.1, 9.0, 9.6, 9.8, 10.1, 9.4, 8.9, 8.4, 8.1], backgroundColor: colors.secondary }
                ]
            },
            options: { ...chartConfig, scales: { y: { beginAtZero: true, ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } }, x: { ticks: { color: colors.gray, fontSize: 9 } } } }
        });

        new Chart(document.getElementById('chart11d'), {
            type: 'line',
            data: {
                labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
                datasets: [
                    { label: 'L≈©y k·∫ø nƒÉm nay (T·ª∑)', data: [7.4, 15.6, 24.5, 33.6, 42.6, 52.2, 62.0, 72.1, 81.5, 90.4, 98.8, 106.9], borderColor: colors.primary, backgroundColor: 'rgba(220,38,38,0.08)', tension: 0.35, fill: true, borderWidth: 2.5, pointRadius: 2 },
                    { label: 'L≈©y k·∫ø nƒÉm tr∆∞·ªõc (T·ª∑)', data: [6.8, 14.0, 22.0, 30.1, 38.0, 47.2, 56.1, 65.0, 73.4, 81.5, 89.0, 96.0], borderColor: colors.gray, backgroundColor: 'rgba(156,163,175,0.08)', tension: 0.35, fill: false, borderWidth: 2, pointRadius: 2, borderDash: [4, 4] }
                ]
            },
            options: { ...chartConfig, scales: { y: { beginAtZero: true, ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } }, x: { ticks: { color: colors.gray } } } }
        });

        new Chart(document.getElementById('chartP3Trend'), {
            type: 'line',
            data: {
                labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
                datasets: [
                    { label: 'Ng√¢n s√°ch (T·ª∑)', data: [46, 46, 46, 46, 46, 46, 47, 47, 47, 47, 48, 48], borderColor: colors.success, borderDash: [6, 4], borderWidth: 2, pointRadius: 3 },
                    { label: 'Th·ª±c thu (T·ª∑)', data: [43, 44, 45, 46, 45, 47, 46, 47, 48, 47, 49, 48], borderColor: colors.primary, backgroundColor: 'rgba(220,38,38,0.08)', tension: 0.35, fill: true, borderWidth: 2.5, pointRadius: 3 }
                ]
            },
            options: { ...chartConfig, scales: { y: { beginAtZero: false, ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } }, x: { ticks: { color: colors.gray } } } }
        });

        new Chart(document.getElementById('chartP3ByProject'), {
            type: 'bar',
            data: {
                labels: projects,
                datasets: [
                    { label: 'Thu ng√¢n s√°ch', data: p1RevenueTotal, backgroundColor: '#10B981' },
                    { label: 'Th·ª±c thu', data: p1ActualRevenue, backgroundColor: '#6EE7B7' }
                ]
            },
            options: { ...chartConfig, scales: { y: { beginAtZero: true, ticks: { color: colors.gray } }, x: { ticks: { color: colors.gray } } } }
        });

        const p3VarianceData = p1ActualRevenue.map((v, i) => v - p1RevenueTotal[i]);
        new Chart(document.getElementById('chartP3Variance'), {
            type: 'bar',
            data: {
                labels: projects,
                datasets: [{
                    label: 'Ch√™nh l·ªách thu',
                    data: p3VarianceData,
                    backgroundColor: p3VarianceData.map(v => v >= 0 ? '#10B981' : '#F87171')
                }]
            },
            options: { ...chartConfig, scales: { y: { ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } }, x: { ticks: { color: colors.gray } } } }
        });

        const p3DetailRows = projects.map((name, i) => {
            const budget = p1RevenueTotal[i];
            const actual = p1ActualRevenue[i];
            const pct = (actual / budget) * 100;
            const trend = pct >= 100 ? '‚ñ≤ 4%' : '‚ñº 3%';
            return `<tr><td>${name}</td><td>${budget.toFixed(1)}</td><td>${actual.toFixed(1)}</td><td>${pct.toFixed(1)}%</td><td>${trend}</td></tr>`;
        });
        document.getElementById('p3DetailBody').innerHTML = p3DetailRows.join('');

        new Chart(document.getElementById('chartP4Trend'), {
            type: 'line',
            data: {
                labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
                datasets: [
                    { label: 'Ng√¢n s√°ch (T·ª∑)', data: [32, 32, 32, 33, 33, 33, 34, 34, 34, 35, 35, 35], borderColor: colors.success, borderDash: [6, 4], borderWidth: 2, pointRadius: 3 },
                    { label: 'Th·ª±c chi (T·ª∑)', data: [31, 32, 33, 34, 33, 34, 35, 34, 35, 34, 35, 34], borderColor: colors.primary, backgroundColor: 'rgba(220,38,38,0.08)', tension: 0.35, fill: true, borderWidth: 2.5, pointRadius: 3 }
                ]
            },
            options: { ...chartConfig, scales: { y: { beginAtZero: false, ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } }, x: { ticks: { color: colors.gray } } } }
        });

        new Chart(document.getElementById('chartP4ByProject'), {
            type: 'bar',
            data: {
                labels: projects,
                datasets: [
                    { label: 'Chi ng√¢n s√°ch', data: p1CostTotal, backgroundColor: colors.primary },
                    { label: 'Th·ª±c chi', data: p1ActualCost, backgroundColor: colors.light }
                ]
            },
            options: { ...chartConfig, scales: { y: { beginAtZero: true, ticks: { color: colors.gray } }, x: { ticks: { color: colors.gray } } } }
        });

        const p4VarianceData = p1ActualCost.map((v, i) => v - p1CostTotal[i]);
        new Chart(document.getElementById('chartP4Variance'), {
            type: 'bar',
            data: {
                labels: projects,
                datasets: [{
                    label: 'Ch√™nh l·ªách chi',
                    data: p4VarianceData,
                    backgroundColor: p4VarianceData.map(v => v > 0 ? '#DC2626' : '#10B981')
                }]
            },
            options: { ...chartConfig, scales: { y: { ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } }, x: { ticks: { color: colors.gray } } } }
        });

        new Chart(document.getElementById('chartP4Structure'), {
            type: 'bar',
            data: {
                labels: projects,
                datasets: [
                    { label: 'Ph√°p l√Ω', data: [6, 5, 5, 7, 4], backgroundColor: '#FCA5A5', stack: 'cost' },
                    { label: 'Ki·∫øn thi·∫øt', data: [20, 18, 16, 22, 14], backgroundColor: '#F87171', stack: 'cost' },
                    { label: 'B√°n h√†ng', data: [12, 10, 9, 13, 8], backgroundColor: '#FB7185', stack: 'cost' },
                    { label: 'Chu·∫©n b·ªã', data: [8, 7, 6, 9, 5], backgroundColor: '#F59E0B', stack: 'cost' },
                    { label: 'Thi·∫øt b·ªã', data: [10, 9, 8, 12, 7], backgroundColor: '#FCD34D', stack: 'cost' },
                    { label: 'Nh√¢n c√¥ng', data: [15, 14, 12, 18, 10], backgroundColor: '#60A5FA', stack: 'cost' },
                    { label: 'V·∫≠t t∆∞', data: [6, 5, 5, 7, 4], backgroundColor: '#93C5FD', stack: 'cost' },
                    { label: 'Tr·ª±c ti·∫øp', data: [3, 2, 2, 3, 2], backgroundColor: '#A7F3D0', stack: 'cost' }
                ]
            },
            options: {
                ...chartConfig,
                scales: {
                    x: { stacked: true, ticks: { color: colors.gray } },
                    y: { stacked: true, ticks: { color: colors.gray }, grid: { color: '#F3F4F6' } }
                }
            }
        });

        const p4DetailRows = projects.map((name, i) => {
            const budget = p1CostTotal[i];
            const actual = p1ActualCost[i];
            const delta = actual - budget;
            const risk = delta > 3 ? 'Cao' : (delta > 0 ? 'Trung b√¨nh' : 'Th·∫•p');
            const riskClass = delta > 3 ? 'risk-high' : (delta > 0 ? 'risk-medium' : 'risk-low');
            return `<tr><td>${name}</td><td>${budget.toFixed(1)}</td><td>${actual.toFixed(1)}</td><td>${delta.toFixed(1)}</td><td class="${riskClass}">${risk}</td></tr>`;
        });
        document.getElementById('p4DetailBody').innerHTML = p4DetailRows.join('');

        document.querySelectorAll('.toggle-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderPage2(btn.dataset.mode);
            });
        });

        renderPage2('total');
        initPage2Filters();

        document.querySelectorAll('.nav-item').forEach((item) => {
            item.addEventListener('click', (e) => {
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                e.target.closest('.nav-item').classList.add('active');
                document.getElementById('page' + item.dataset.page).classList.add('active');
                setTimeout(() => window.dispatchEvent(new Event('resize')), 100);
            });
        });
    </script>
</body>
</html>
